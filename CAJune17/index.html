<!DOCTYPE html>
<!--
    ZENITH PRODUCTIVITY APP
    =======================
    
    A comprehensive, single-file productivity suite designed for Gen-Z users
    
    FEATURES:
    =========
    
    🎯 TASK MANAGEMENT
    - Scrum board with drag-and-drop functionality
    - Priority-based task organization (low, medium, high)
    - Recurring task support
    - Category-based task grouping
    - Due date tracking and overdue alerts
    - Task move buttons as drag-and-drop fallback
    
    💰 BUDGET TRACKER
    - Income and expense tracking
    - Category-based budget management
    - Monthly spending visualizations
    - Savings goal tracking with progress bars
    - Spending recommendations and alerts
    - Interactive charts (bar and doughnut)
    
    📝 NOTES SYSTEM
    - Rich text note creation and editing
    - Tag-based organization and filtering
    - Full-text search functionality
    - Cross-module linking (tasks, budget, notes)
    - CRUD operations with edit/delete actions
    - Real-time filtering and search
    
    🎮 GAMIFICATION
    - Daily activity streak tracking
    - Achievement system based on user engagement
    - Progress visualization and encouragement
    
    🤖 AI RECOMMENDATIONS
    - Smart task prioritization suggestions
    - Budget spending analysis and advice
    - Note organization recommendations
    - Behavioral pattern recognition
    - Actionable productivity insights
    
    🎨 USER EXPERIENCE
    - Dark/light theme toggle with persistence
    - Responsive design (mobile-first approach)
    - Modern Gen-Z color scheme and typography
    - Intuitive navigation with tile-based dashboard
    - Real-time data synchronization
    - Local storage for offline functionality
    
    📊 VISUALIZATIONS
    - Dashboard overview with key metrics
    - Task completion trends (7-day chart)
    - Budget breakdown by category
    - Monthly spending analysis
    - Interactive Chart.js visualizations
    
    🔧 TECHNICAL SPECIFICATIONS
    - Single HTML file architecture
    - Pure JavaScript (no frameworks)
    - CSS Grid and Flexbox layouts
    - CSS Custom Properties for theming
    - localStorage for data persistence
    - Event-driven architecture
    - Modular function design
    
    📱 RESPONSIVE DESIGN
    - Mobile-first CSS approach
    - Flexible grid layouts
    - Touch-friendly interactions
    - Adaptive typography scaling
    - Optimized for all screen sizes
    
    🏗️ ARCHITECTURE
    - Centralized state management
    - Module-based organization
    - Event listener management system
    - Cross-module data synchronization
    - Extensible category system
    - Plugin-ready chart integration
    
    AUTHOR: AI Assistant (GitHub Copilot)
    VERSION: 1.0
    CREATED: 2024
    LAST UPDATED: 2024
    
    LICENSE: Open Source - Feel free to modify and distribute
    
    BROWSER COMPATIBILITY:
    - Chrome/Chromium 90+
    - Firefox 88+
    - Safari 14+
    - Edge 90+
    
    DEPENDENCIES:
    - Chart.js (CDN)
    - Font Awesome Icons (CDN)
    - No additional frameworks required
    
    FILE SIZE: ~2900 lines
    ESTIMATED LOAD TIME: <1 second on modern browsers
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zenith - Your Personal Productivity Hub</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /*
         * ZENITH PRODUCTIVITY APP STYLES
         * ==============================
         * 
         * Modern CSS architecture with:
         * - CSS Custom Properties for theming
         * - Mobile-first responsive design
         * - Gen-Z focused color palette
         * - Smooth animations and transitions
         * - Accessible design patterns
         */
        
        /* 
         * DESIGN SYSTEM - CSS CUSTOM PROPERTIES
         * =====================================
         * Centralized design tokens for consistent theming
         */
        :root {
            /* Light Theme */
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #ec4899;
            --accent: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --success: #22c55e;
            
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --shadow: rgba(0, 0, 0, 0.1);
            
            /* Gradients */
            --gradient-primary: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            --gradient-secondary: linear-gradient(135deg, #ec4899 0%, #f97316 100%);
            --gradient-accent: linear-gradient(135deg, #10b981 0%, #06b6d4 100%);
        }

        /*
         * DARK THEME OVERRIDES
         * ===================
         * Theme-specific color variations for dark mode
         */
        [data-theme="dark"] {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --border: #475569;
            --shadow: rgba(0, 0, 0, 0.3);
        }

        /*
         * GLOBAL RESET AND BASE STYLES
         * ============================
         * Modern CSS reset with accessible defaults
         */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.3s ease;
            overflow-x: hidden;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
        }

        /* Improve touch interactions and accessibility */
        button, input, select, textarea {
            touch-action: manipulation;
            -webkit-tap-highlight-color: rgba(99, 102, 241, 0.2);
        }

        /* Disable text selection on interactive elements */
        button, .btn, .nav-tile, .task-card[draggable="true"] {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* Ensure consistent spacing */
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        /* Better scroll behavior */
        html {
            scroll-behavior: smooth;
        }

        /* Prevent horizontal overflow */
        .app-container, .main-content, .module {
            overflow-x: hidden;
        }

        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.5rem;
            font-weight: 700;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .gamification-stats {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-right: 1rem;
        }

        .gamification-stats > div {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .level-display {
            background: var(--gradient-primary);
            color: white !important;
            padding: 0.4rem 0.8rem;
            border-radius: 15px;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(99, 102, 241, 0.3);
        }

        .xp-display {
            position: relative;
            background: var(--bg-tertiary);
            padding: 0.4rem 0.8rem;
            border-radius: 12px;
            border: 1px solid var(--border);
            min-width: 80px;
        }

        .xp-progress-container {
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: rgba(99, 102, 241, 0.2);
            border-radius: 0 0 12px 12px;
            overflow: hidden;
        }

        .xp-progress-bar {
            height: 100%;
            background: var(--gradient-primary);
            width: 0%;
            transition: width 0.5s ease;
        }

        .badges-display {
            background: var(--gradient-secondary);
            color: white !important;
            padding: 0.4rem 0.8rem;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
            box-shadow: 0 2px 8px rgba(236, 72, 153, 0.3);
        }

        .badges-display:hover {
            transform: scale(1.05);
        }

        .theme-toggle {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-primary);
        }

        .theme-toggle:hover {
            background: var(--primary);
            color: white;
        }

        .streak-counter {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--gradient-accent);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);
        }

        /* Gamification Animations */
        @keyframes xpFloat {
            0% {
                transform: translateY(0);
                opacity: 1;
            }
            100% {
                transform: translateY(-50px);
                opacity: 0;
            }
        }

        @keyframes levelUpPulse {
            0% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
            20% {
                transform: translate(-50%, -50%) scale(1.1);
                opacity: 1;
            }
            40% {
                transform: translate(-50%, -50%) scale(1);
            }
            80% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
            100% {
                transform: translate(-50%, -50%) scale(0);
                opacity: 0;
            }
        }

        @keyframes badgeSlideDown {
            0% {
                transform: translateX(-50%) translateY(-100px);
                opacity: 0;
            }
            20% {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
            80% {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
            100% {
                transform: translateX(-50%) translateY(-100px);
                opacity: 0;
            }
        }

        /* Badge Display Styles */
        .badge-notification h4 {
            margin: 0 0 0.5rem 0;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .badge-notification h3 {
            margin: 0 0 0.5rem 0;
            font-size: 1.2rem;
        }

        .badge-notification p {
            margin: 0 0 0.5rem 0;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .badge-notification small {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .badge-notification i {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        /* Level Up Notification Styles */
        .level-up-notification h3 {
            margin: 0.5rem 0;
            font-size: 1.5rem;
        }

        .level-up-notification p {
            margin: 0;
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .level-up-notification i {
            font-size: 3rem;
            margin-bottom: 0.5rem;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }

        .dashboard {
            display: block;
        }

        .dashboard-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .dashboard-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .dashboard-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-primary);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .stat-card:hover::before {
            opacity: 1;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px var(--shadow);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .stat-icon.tasks {
            background: var(--gradient-primary);
        }

        .stat-icon.budget {
            background: var(--gradient-secondary);
        }

        .stat-icon.notes {
            background: var(--gradient-accent);
        }

        .stat-content h3 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .stat-content p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Navigation Tiles */
        .nav-tiles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .nav-tile {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-tile::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0;
            transition: all 0.3s ease;
            z-index: 1;
        }

        .nav-tile.tasks::before {
            background: var(--gradient-primary);
        }

        .nav-tile.budget::before {
            background: var(--gradient-secondary);
        }

        .nav-tile.notes::before {
            background: var(--gradient-accent);
        }

        .nav-tile:hover::before {
            opacity: 0.1;
        }

        .nav-tile:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px var(--shadow);
        }

        .nav-tile-content {
            position: relative;
            z-index: 2;
        }

        .nav-tile-icon {
            width: 80px;
            height: 80px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            margin: 0 auto 1.5rem;
        }

        .nav-tile.tasks .nav-tile-icon {
            background: var(--gradient-primary);
        }

        .nav-tile.budget .nav-tile-icon {
            background: var(--gradient-secondary);
        }

        .nav-tile.notes .nav-tile-icon {
            background: var(--gradient-accent);
        }

        .nav-tile h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .nav-tile p {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Charts */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 2rem;
        }

        .chart-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
        }

        .chart-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Module Styles */
        .module {
            display: none;
        }

        .module.active {
            display: block;
        }

        .module-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .module-title {
            font-size: 2rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .back-btn {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .back-btn:hover {
            background: var(--primary);
            color: white;
        }

        /* Task Manager Styles */
        .scrum-board {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .scrum-column {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            min-height: 400px;
        }

        .scrum-column-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .scrum-column-title {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .task-count {
            background: var(--primary);
            color: white;
            border-radius: 20px;
            padding: 0.25rem 0.5rem;
            font-size: 0.8rem;
        }

        .task-card {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1rem;
            cursor: grab;
            transition: all 0.3s ease;
            user-select: none;
        }

        .task-card:active {
            cursor: grabbing;
        }

        .task-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px var(--shadow);
        }

        .task-card.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }

        .tasks-container {
            min-height: 100px;
            padding: 0.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .tasks-container.drag-over {
            background: rgba(99, 102, 241, 0.1);
            border: 2px dashed var(--primary);
            border-radius: 8px;
        }

        .task-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .task-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }

        .task-priority {
            padding: 0.25rem 0.5rem;
            border-radius: 8px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .task-priority.high {
            background: var(--danger);
            color: white;
        }

        .task-priority.medium {
            background: var(--warning);
            color: white;
        }

        .task-priority.low {
            background: var(--success);
            color: white;
        }

        .move-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            font-size: 0.7rem;
            cursor: pointer;
            margin-right: 0.25rem;
            transition: all 0.2s ease;
        }

        .move-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
        }

        /* Budget Tracker Styles */
        .budget-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .budget-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
        }

        .budget-amount {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .budget-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 1rem;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-primary);
            transition: width 0.3s ease;
        }

        /* Notes Styles */
        .notes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .note-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .note-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px var(--shadow);
        }

        .note-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .note-preview {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .note-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .note-tag {
            background: var(--primary);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.7rem;
        }

        /* Recommendations Section */
        .recommendations-section {
            margin-bottom: 3rem;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-primary);
        }

        .recommendations-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .recommendation-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .recommendation-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-primary);
        }

        .recommendation-card.budget::before {
            background: var(--gradient-secondary);
        }

        .recommendation-card.notes::before {
            background: var(--gradient-accent);
        }

        .recommendation-type {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .recommendation-card.budget .recommendation-type {
            color: var(--secondary);
        }

        .recommendation-card.notes .recommendation-type {
            color: var(--accent);
        }

        .recommendation-title {
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .recommendation-content {
            color: var(--text-secondary);
            line-height: 1.5;
            margin-bottom: 1rem;
        }

        .recommendation-action {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .recommendation-action:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        /* Category Management */
        .category-management {
            margin-bottom: 3rem;
        }

        .category-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .category-tab {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-primary);
        }

        .category-tab.active {
            background: var(--primary);
            color: white;
        }

        .category-content {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
        }

        .category-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .category-item {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 0.5rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }

        .category-remove {
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.7rem;
        }

        .add-category {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .add-category .form-input {
            flex: 1;
            margin-bottom: 0;
        }

        /* Notes Filter Section */
        .notes-filter-section {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .notes-search {
            position: relative;
            margin-bottom: 1rem;
        }

        .notes-search input {
            padding-right: 3rem;
        }

        .notes-search i {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        .notes-tags-filter {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .filter-label {
            font-weight: 600;
            color: var(--text-primary);
        }

        .tags-filter-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .tag-filter {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            color: var(--text-primary);
        }

        .tag-filter:hover {
            background: var(--primary);
            color: white;
        }

        .tag-filter.active {
            background: var(--primary);
            color: white;
        }

        .note-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .note-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px var(--shadow);
        }

        .note-actions {
            position: absolute;
            top: 1rem;
            right: 1rem;
            display: flex;
            gap: 0.5rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .note-card:hover .note-actions {
            opacity: 1;
        }

        .note-action-btn {
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .note-action-btn:hover {
            background: var(--primary-dark);
        }

        .note-action-btn.delete {
            background: var(--danger);
        }

        .note-action-btn.delete:hover {
            background: #dc2626;
        }

        /* Forms */
        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: var(--bg-primary);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(99, 102, 241, 0.4);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-primary);
            border-radius: 16px;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-secondary);
        }

        /* Enhanced Mobile Responsiveness */
        @media (max-width: 768px) {
            /* Universal mobile improvements */
            * {
                box-sizing: border-box;
            }

            /* Prevent horizontal scroll */
            body, html {
                overflow-x: hidden;
                max-width: 100vw;
            }

            /* Mobile-first header design */
            .header {
                padding: 0.75rem;
                flex-direction: column;
                gap: 0.75rem;
                position: sticky;
                top: 0;
                z-index: 1000;
                backdrop-filter: blur(10px);
                background: var(--bg-secondary);
                border-bottom: 2px solid var(--border);
            }

            .logo {
                font-size: 1.25rem;
                text-align: center;
                width: 100%;
            }

            /* Mobile header controls - better organization */
            .header-controls {
                display: flex;
                flex-direction: column;
                align-items: stretch;
                gap: 0.75rem;
                width: 100%;
            }

            /* Gamification stats - responsive grid */
            .gamification-stats {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 0.5rem;
                width: 100%;
                margin: 0;
            }

            .gamification-stats > div {
                font-size: 0.8rem;
                padding: 0.5rem;
                text-align: center;
                justify-content: center;
                border-radius: 8px;
                min-height: 44px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .level-display, .xp-display, .badges-display, .streak-counter {
                padding: 0.5rem;
                border-radius: 8px;
                font-size: 0.8rem;
                font-weight: 600;
            }

            .theme-toggle {
                align-self: center;
                padding: 0.75rem;
                min-height: 44px;
                min-width: 44px;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            /* Uniform content padding with safe areas */
            .main-content {
                padding: 1rem;
                padding-left: max(1rem, env(safe-area-inset-left));
                padding-right: max(1rem, env(safe-area-inset-right));
                padding-bottom: max(1rem, env(safe-area-inset-bottom));
                width: 100%;
                max-width: 100vw;
                overflow-x: hidden;
            }

            /* Dashboard mobile improvements */
            .dashboard-header {
                text-align: center;
                margin-bottom: 1.5rem;
                padding: 0 0.5rem;
            }

            .dashboard-title {
                font-size: 1.75rem;
                margin-bottom: 0.5rem;
                line-height: 1.2;
            }

            .dashboard-subtitle {
                font-size: 0.9rem;
                opacity: 0.8;
            }

            /* Stats cards - single column with enhanced mobile styling */
            .stats-cards {
                display: grid;
                grid-template-columns: 1fr;
                gap: 1rem;
                margin-bottom: 2rem;
                width: 100%;
            }

            .stat-card {
                padding: 1.25rem;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 2px 8px rgba(0,0,0,0.1);
                transition: transform 0.2s ease;
                width: 100%;
            }

            .stat-card:active {
                transform: scale(0.98);
            }

            /* Navigation tiles - single column with better spacing */
            .nav-tiles {
                display: grid;
                grid-template-columns: 1fr;
                gap: 1rem;
                margin-bottom: 2rem;
                width: 100%;
            }

            .nav-tile {
                padding: 1.5rem;
                min-height: 80px;
                border-radius: 12px;
                text-align: center;
                transition: all 0.3s ease;
                cursor: pointer;
                touch-action: manipulation;
                width: 100%;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }

            .nav-tile:active {
                transform: scale(0.98);
            }

            .nav-tile h3 {
                font-size: 1.1rem;
                margin-bottom: 0.5rem;
            }

            .nav-tile p {
                font-size: 0.85rem;
                opacity: 0.8;
                margin: 0;
            }

            .nav-tile i {
                font-size: 1.5rem;
                margin-bottom: 0.75rem;
                opacity: 0.7;
            }

            /* Charts - single column with better mobile formatting */
            .charts-grid {
                display: grid;
                grid-template-columns: 1fr;
                gap: 1.5rem;
                margin-bottom: 2rem;
                width: 100%;
            }

            .chart-container {
                padding: 1.25rem;
                border-radius: 12px;
                background: var(--bg-secondary);
                border: 1px solid var(--border);
                width: 100%;
                overflow: hidden;
            }

            .chart-container h3 {
                font-size: 1rem;
                margin-bottom: 1rem;
                text-align: center;
            }

            /* Recommendations - single column with mobile optimization */
            .recommendations-grid {
                display: grid;
                grid-template-columns: 1fr;
                gap: 1rem;
                margin-bottom: 2rem;
                width: 100%;
            }

            .recommendation-card {
                padding: 1.25rem;
                border-radius: 12px;
                border-left: 4px solid var(--primary);
                background: var(--bg-secondary);
                width: 100%;
            }

            .recommendation-card h4 {
                font-size: 0.95rem;
                margin-bottom: 0.5rem;
            }

            .recommendation-card p {
                font-size: 0.85rem;
                opacity: 0.9;
                margin: 0;
            }

            /* Category management - mobile-first design */
            .category-tabs {
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
                margin-bottom: 1.5rem;
            }

            .category-tab {
                padding: 0.75rem 1rem;
                text-align: center;
                border-radius: 8px;
                border: 1px solid var(--border);
                background: var(--bg-secondary);
                cursor: pointer;
                transition: all 0.2s ease;
                font-weight: 500;
                min-height: 44px;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .category-tab.active {
                background: var(--primary);
                color: white;
                border-color: var(--primary);
            }

            .category-tab:active {
                transform: scale(0.98);
            }

            .category-content {
                padding: 1.25rem;
                background: var(--bg-secondary);
                border-radius: 12px;
                border: 1px solid var(--border);
                width: 100%;
            }

            .category-input-group {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
                margin-bottom: 1rem;
            }

            .category-input-group input {
                width: 100%;
                padding: 0.75rem;
                border: 1px solid var(--border);
                border-radius: 8px;
                font-size: 1rem;
                background: var(--bg-primary);
                color: var(--text-primary);
            }

            .category-input-group button {
                width: 100%;
                padding: 0.75rem;
                min-height: 44px;
                border-radius: 8px;
                font-size: 0.9rem;
                font-weight: 600;
            }

            /* Task management - mobile-optimized scrum board */
            .scrum-board {
                display: grid;
                grid-template-columns: 1fr;
                gap: 1.5rem;
                width: 100%;
                margin-bottom: 2rem;
            }

            .scrum-column {
                background: var(--bg-secondary);
                border-radius: 12px;
                border: 1px solid var(--border);
                min-height: 300px;
                width: 100%;
                overflow: hidden;
            }

            .scrum-column h3 {
                font-size: 1rem;
                padding: 1rem;
                background: var(--bg-primary);
                margin: 0;
                border-bottom: 1px solid var(--border);
                text-align: center;
                font-weight: 600;
            }

            .tasks-container {
                padding: 1rem;
                min-height: 250px;
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
            }

            .task-card {
                padding: 1rem;
                background: var(--bg-primary);
                border: 1px solid var(--border);
                border-radius: 8px;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                transition: all 0.2s ease;
                cursor: pointer;
                touch-action: manipulation;
                width: 100%;
            }

            .task-card:active {
                transform: scale(0.98);
            }

            .task-title {
                font-size: 0.95rem;
                font-weight: 600;
                margin-bottom: 0.5rem;
                color: var(--text-primary);
            }

            .task-description {
                font-size: 0.85rem;
                color: var(--text-secondary);
                margin-bottom: 0.75rem;
                line-height: 1.4;
            }

            .task-meta {
                display: flex;
                flex-wrap: wrap;
                gap: 0.5rem;
                align-items: center;
                margin-bottom: 0.75rem;
            }

            .task-priority, .task-category {
                font-size: 0.75rem;
                padding: 0.25rem 0.5rem;
                border-radius: 12px;
                font-weight: 500;
            }

            .move-buttons {
                display: flex;
                gap: 0.5rem;
                flex-wrap: wrap;
            }

            .move-btn {
                font-size: 0.75rem;
                padding: 0.4rem 0.8rem;
                border-radius: 6px;
                border: none;
                background: var(--primary);
                color: white;
                cursor: pointer;
                flex: 1;
                min-height: 36px;
                transition: all 0.2s ease;
            }

            .move-btn:active {
                transform: scale(0.95);
            }

            /* Budget module - mobile-optimized layout */
            .budget-overview {
                display: grid;
                grid-template-columns: 1fr;
                gap: 1.5rem;
                margin-bottom: 2rem;
                width: 100%;
            }

            .budget-card {
                padding: 1.25rem;
                background: var(--bg-secondary);
                border: 1px solid var(--border);
                border-radius: 12px;
                text-align: center;
                width: 100%;
            }

            .budget-card h3 {
                font-size: 1rem;
                margin-bottom: 0.75rem;
                color: var(--text-primary);
            }

            .budget-card .amount {
                font-size: 1.5rem;
                font-weight: 700;
                margin-bottom: 0.5rem;
            }

            .budget-charts {
                display: grid;
                grid-template-columns: 1fr;
                gap: 1.5rem;
                width: 100%;
            }

            .budget-chart-container {
                padding: 1.25rem;
                background: var(--bg-secondary);
                border: 1px solid var(--border);
                border-radius: 12px;
                width: 100%;
                overflow: hidden;
            }

            /* Budget forms */
            .budget-form {
                background: var(--bg-secondary);
                padding: 1.25rem;
                border-radius: 12px;
                border: 1px solid var(--border);
                margin-bottom: 1.5rem;
                width: 100%;
            }

            .budget-form .form-row {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
                margin-bottom: 1rem;
            }

            .budget-form .form-group {
                flex: 1;
            }

            /* Notes module - mobile-first design */
            .notes-header {
                display: flex;
                flex-direction: column;
                gap: 1rem;
                margin-bottom: 2rem;
                padding: 1rem;
                background: var(--bg-secondary);
                border-radius: 12px;
                border: 1px solid var(--border);
            }

            .notes-controls {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
                width: 100%;
            }

            .notes-search {
                width: 100%;
                padding: 0.75rem;
                border: 1px solid var(--border);
                border-radius: 8px;
                font-size: 1rem;
                background: var(--bg-primary);
                color: var(--text-primary);
            }

            .tags-filter {
                display: flex;
                flex-wrap: wrap;
                gap: 0.5rem;
                width: 100%;
            }

            .tag-filter {
                font-size: 0.8rem;
                padding: 0.5rem 0.75rem;
                border-radius: 20px;
                border: 1px solid var(--border);
                background: var(--bg-primary);
                color: var(--text-secondary);
                cursor: pointer;
                transition: all 0.2s ease;
                min-height: 36px;
                display: flex;
                align-items: center;
                white-space: nowrap;
            }

            .tag-filter.active {
                background: var(--primary);
                color: white;
                border-color: var(--primary);
            }

            .tag-filter:active {
                transform: scale(0.95);
            }

            .notes-grid {
                display: grid;
                grid-template-columns: 1fr;
                gap: 1rem;
                width: 100%;
            }

            .note-card {
                padding: 1.25rem;
                background: var(--bg-secondary);
                border: 1px solid var(--border);
                border-radius: 12px;
                transition: all 0.2s ease;
                width: 100%;
                cursor: pointer;
            }

            .note-card:active {
                transform: scale(0.98);
            }

            .note-title {
                font-size: 1rem;
                font-weight: 600;
                margin-bottom: 0.75rem;
                color: var(--text-primary);
            }

            .note-content {
                font-size: 0.9rem;
                color: var(--text-secondary);
                line-height: 1.5;
                margin-bottom: 0.75rem;
            }

            .note-tags {
                display: flex;
                flex-wrap: wrap;
                gap: 0.25rem;
                margin-bottom: 0.75rem;
            }

            .note-tag {
                font-size: 0.75rem;
                padding: 0.25rem 0.5rem;
                background: var(--primary);
                color: white;
                border-radius: 12px;
            }

            .note-actions {
                display: flex;
                gap: 0.5rem;
                flex-wrap: wrap;
            }

            .note-action-btn {
                font-size: 0.8rem;
                padding: 0.4rem 0.8rem;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                flex: 1;
                min-height: 36px;
                transition: all 0.2s ease;
            }

            .note-action-btn:active {
                transform: scale(0.95);
            }

            /* Module headers - mobile-optimized */
            .module-header {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 1rem;
                margin-bottom: 2rem;
                text-align: center;
                padding: 1.25rem;
                background: var(--bg-secondary);
                border-radius: 12px;
                border: 1px solid var(--border);
            }

            .module-title {
                font-size: 1.5rem;
                font-weight: 700;
                color: var(--text-primary);
                margin: 0;
            }

            .back-btn {
                padding: 0.75rem 1.5rem;
                background: var(--primary);
                color: white;
                border: none;
                border-radius: 8px;
                font-size: 0.9rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.2s ease;
                min-height: 44px;
                min-width: 120px;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 0.5rem;
            }

            .back-btn:active {
                transform: scale(0.95);
            }

            /* Forms and modals - mobile-first design */
            .modal {
                padding: 1rem;
                align-items: flex-start;
                justify-content: center;
                padding-top: 2rem;
            }

            .modal.active {
                display: flex;
            }

            .modal-content {
                width: calc(100vw - 2rem);
                max-width: 100%;
                max-height: calc(100vh - 4rem);
                padding: 1.5rem;
                border-radius: 12px;
                background: var(--bg-primary);
                border: 1px solid var(--border);
                box-shadow: 0 10px 25px rgba(0,0,0,0.2);
                overflow-y: auto;
            }

            .modal-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 1.5rem;
                padding-bottom: 1rem;
                border-bottom: 1px solid var(--border);
            }

            .modal-title {
                font-size: 1.25rem;
                font-weight: 600;
                color: var(--text-primary);
                margin: 0;
            }

            .close-btn {
                background: none;
                border: none;
                font-size: 1.5rem;
                color: var(--text-secondary);
                cursor: pointer;
                padding: 0.5rem;
                border-radius: 50%;
                width: 44px;
                height: 44px;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.2s ease;
            }

            .close-btn:active {
                transform: scale(0.9);
                background: var(--bg-secondary);
            }

            .form-group {
                margin-bottom: 1.25rem;
                width: 100%;
            }

            .form-group label {
                display: block;
                font-size: 0.9rem;
                font-weight: 500;
                margin-bottom: 0.5rem;
                color: var(--text-primary);
            }

            .form-control {
                width: 100%;
                padding: 0.75rem;
                border: 1px solid var(--border);
                border-radius: 8px;
                font-size: 1rem;
                background: var(--bg-secondary);
                color: var(--text-primary);
                transition: border-color 0.2s ease;
                box-sizing: border-box;
            }

            .form-control:focus {
                outline: none;
                border-color: var(--primary);
                box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
            }

            textarea.form-control {
                min-height: 120px;
                resize: vertical;
                line-height: 1.5;
            }

            .btn {
                padding: 0.75rem 1.5rem;
                border: none;
                border-radius: 8px;
                font-size: 0.9rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.2s ease;
                min-height: 44px;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                gap: 0.5rem;
                touch-action: manipulation;
            }

            .btn:active {
                transform: scale(0.95);
            }

            .btn-primary {
                background: var(--primary);
                color: white;
            }

            .btn-secondary {
                background: var(--bg-secondary);
                color: var(--text-primary);
                border: 1px solid var(--border);
            }

            .btn-danger {
                background: #ef4444;
                color: white;
            }

            .btn-group {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
                width: 100%;
                margin-top: 1rem;
            }

            .btn-group .btn {
                width: 100%;
            }

            /* Action buttons - mobile optimized */
            .add-btn, .action-btn {
                width: 100%;
                margin-bottom: 1rem;
                padding: 0.75rem;
                font-size: 0.9rem;
                font-weight: 600;
                border: none;
                border-radius: 8px;
                background: var(--primary);
                color: white;
                cursor: pointer;
                transition: all 0.2s ease;
                min-height: 44px;
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 0.5rem;
                touch-action: manipulation;
            }

            .add-btn:active, .action-btn:active {
                transform: scale(0.98);
            }

            .add-btn i, .action-btn i {
                font-size: 1rem;
            }

            /* Enhanced touch targets and accessibility */
            button, .btn, .nav-tile, .card, .task-card, .note-card {
                min-height: 44px;
                touch-action: manipulation;
                -webkit-tap-highlight-color: rgba(99, 102, 241, 0.2);
            }

            /* Better spacing for lists and cards */
            .category-list {
                display: flex;
                flex-direction: column;
                gap: 0.75rem;
                width: 100%;
            }

            .category-item {
                padding: 0.75rem;
                background: var(--bg-secondary);
                border: 1px solid var(--border);
                border-radius: 8px;
                display: flex;
                align-items: center;
                justify-content: space-between;
                flex-wrap: wrap;
                gap: 0.5rem;
                width: 100%;
            }

            .category-item-name {
                font-weight: 500;
                color: var(--text-primary);
                flex: 1;
                min-width: 0;
            }

            .category-item-actions {
                display: flex;
                gap: 0.5rem;
            }

            .category-item-actions button {
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
                border-radius: 6px;
                min-height: 36px;
            }

            /* Notification positioning for mobile */
            .xp-gain-indicator,
            .badge-notification,
            .level-up-notification {
                left: 1rem !important;
                right: 1rem !important;
                transform: none !important;
                max-width: calc(100vw - 2rem);
                z-index: 10000;
            }

            .level-up-notification {
                top: 50% !important;
                transform: translateY(-50%) !important;
                position: fixed;
                background: var(--gradient-primary);
                color: white;
                padding: 1.5rem;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            }

            .xp-gain-indicator {
                position: fixed;
                top: 20%;
                background: var(--gradient-accent);
                color: white;
                padding: 0.75rem;
                border-radius: 8px;
                font-weight: 600;
                text-align: center;
            }

            .badge-notification {
                position: fixed;
                top: 30%;
                background: var(--gradient-secondary);
                color: white;
                padding: 1rem;
                border-radius: 12px;
                text-align: center;
                box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            }

            /* Drag and drop improvements for mobile */
            .task-card[draggable="true"] {
                cursor: grab;
                user-select: none;
                -webkit-user-select: none;
            }

            .task-card[draggable="true"]:active {
                cursor: grabbing;
            }

            /* Ensure proper stacking context */
            .modal {
                z-index: 1000;
            }

            .header {
                z-index: 100;
            }

            /* Safe area handling for devices with notches */
            @supports (padding: max(0px)) {
                .header {
                    padding-left: max(0.75rem, env(safe-area-inset-left));
                    padding-right: max(0.75rem, env(safe-area-inset-right));
                    padding-top: max(0.75rem, env(safe-area-inset-top));
                }

                .main-content {
                    padding-left: max(1rem, env(safe-area-inset-left));
                    padding-right: max(1rem, env(safe-area-inset-right));
                    padding-bottom: max(1rem, env(safe-area-inset-bottom));
                }
            }
        }

        /* Enhanced Extra Small Screens (480px and below) */
        @media (max-width: 480px) {
            /* Even more compact header */
            .header {
                padding: 0.5rem;
            }

            .logo {
                font-size: 1.1rem;
            }

            /* Ultra-compact gamification stats */
            .gamification-stats {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }

            .gamification-stats > div {
                font-size: 0.75rem;
                padding: 0.4rem 0.6rem;
            }

            /* Tighter content spacing */
            .main-content {
                padding: 0.75rem;
            }

            /* Smaller dashboard elements */
            .dashboard-title {
                font-size: 1.4rem;
            }

            .dashboard-subtitle {
                font-size: 0.85rem;
            }

            /* Compact cards */
            .stat-card, .nav-tile, .chart-container, .recommendation-card {
                padding: 1rem;
            }

            .nav-tile {
                min-height: 70px;
            }

            .nav-tile h3 {
                font-size: 1rem;
            }

            .nav-tile p {
                font-size: 0.8rem;
            }

            .nav-tile i {
                font-size: 1.25rem;
                margin-bottom: 0.5rem;
            }

            /* Smaller modals on tiny screens */
            .modal {
                padding: 0.5rem;
                padding-top: 1rem;
            }

            .modal-content {
                width: calc(100vw - 1rem);
                padding: 1rem;
                max-height: calc(100vh - 2rem);
            }

            .modal-title {
                font-size: 1.1rem;
            }

            /* Compact forms */
            .form-group {
                margin-bottom: 1rem;
            }

            .form-group label {
                font-size: 0.85rem;
                margin-bottom: 0.4rem;
            }

            .form-control {
                padding: 0.6rem;
                font-size: 0.9rem;
            }

            textarea.form-control {
                min-height: 100px;
            }

            /* Smaller buttons */
            .btn {
                padding: 0.6rem 1.2rem;
                font-size: 0.85rem;
                min-height: 40px;
            }

            .add-btn, .action-btn {
                padding: 0.6rem;
                font-size: 0.85rem;
                min-height: 40px;
            }

            .back-btn {
                padding: 0.6rem 1.2rem;
                min-height: 40px;
                min-width: 100px;
            }

            /* Compact task cards */
            .task-card, .note-card {
                padding: 0.75rem;
            }

            .task-title, .note-title {
                font-size: 0.9rem;
            }

            .task-description {
                font-size: 0.8rem;
            }

            .move-btn {
                font-size: 0.7rem;
                padding: 0.3rem 0.6rem;
                min-height: 32px;
            }

            /* Compact category management */
            .category-tab {
                padding: 0.6rem 0.8rem;
                font-size: 0.85rem;
                min-height: 40px;
            }

            .category-content {
                padding: 1rem;
            }

            .category-item {
                padding: 0.6rem;
            }

            .category-item-actions button {
                padding: 0.3rem 0.6rem;
                font-size: 0.75rem;
                min-height: 32px;
            }

            /* Compact notes */
            .notes-search {
                padding: 0.6rem;
                font-size: 0.9rem;
            }

            .tag-filter {
                font-size: 0.75rem;
                padding: 0.4rem 0.6rem;
                min-height: 32px;
            }

            .note-content {
                font-size: 0.85rem;
            }

            .note-tag {
                font-size: 0.7rem;
                padding: 0.2rem 0.4rem;
            }

            .note-action-btn {
                font-size: 0.75rem;
                padding: 0.3rem 0.6rem;
                min-height: 32px;
            }

            /* Budget cards */
            .budget-card {
                padding: 1rem;
            }

            .budget-card .amount {
                font-size: 1.25rem;
            }

            /* Tighter spacing */
            .charts-grid, .recommendations-grid, .budget-overview {
                gap: 1rem;
                margin-bottom: 1.5rem;
            }

            .scrum-board {
                gap: 1rem;
            }

            .tasks-container {
                padding: 0.75rem;
                gap: 0.5rem;
            }

            /* Compact notifications */
            .xp-gain-indicator {
                padding: 0.5rem;
                font-size: 0.85rem;
            }

            .badge-notification {
                padding: 0.75rem;
                font-size: 0.9rem;
            }

            .level-up-notification {
                padding: 1rem;
                font-size: 1rem;
            }

            /* Smaller close button */
            .close-btn {
                width: 36px;
                height: 36px;
                font-size: 1.25rem;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        .pulse {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <!--
        APPLICATION STRUCTURE
        =====================
        
        The app follows a single-page application (SPA) pattern with:
        
        1. HEADER
           - Logo and branding
           - Theme toggle button
           - Activity streak counter
        
        2. MAIN CONTENT AREA
           - Dashboard (default view)
           - Task Manager (scrum board)
           - Budget Tracker (financial management)
           - Notes (knowledge management)
        
        3. MODALS
           - Task creation/editing
           - Transaction entry
           - Note creation/editing
        
        4. NAVIGATION
           - Tile-based dashboard navigation
           - Back buttons for module navigation
           - Responsive menu system
    -->
    
    <!-- APPLICATION CONTAINER -->
    <div class="app-container">
        <!-- Header -->
        <!-- APPLICATION HEADER -->
        <header class="header">
            <div class="logo">
                <i class="fas fa-rocket"></i>
                Zenith
            </div>
            <div class="header-controls">
                <div class="gamification-stats">
                    <div class="level-display">
                        <i class="fas fa-star"></i>
                        <span>Level <span id="user-level">1</span></span>
                    </div>
                    <div class="xp-display">
                        <i class="fas fa-bolt"></i>
                        <span id="user-xp">0</span> XP
                        <div class="xp-progress-container">
                            <div class="xp-progress-bar" id="xp-progress"></div>
                        </div>
                    </div>
                    <div class="streak-counter">
                        <i class="fas fa-fire"></i>
                        <span id="streak-count">0</span> day streak
                    </div>
                    <div class="badges-display">
                        <i class="fas fa-trophy"></i>
                        <span id="badge-count">0</span> badges
                    </div>
                </div>
                <button class="theme-toggle" id="theme-toggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </header>

        <!-- MAIN CONTENT AREA -->
        <!-- Contains all application modules: Dashboard, Tasks, Budget, Notes -->
        <main class="main-content">
            <!-- Dashboard -->
            <div id="dashboard" class="dashboard module active">
                <div class="dashboard-header fade-in-up">
                    <h1 class="dashboard-title">Welcome back! 🚀</h1>
                    <p class="dashboard-subtitle">Let's make today productive and amazing</p>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid fade-in-up">
                    <div class="stat-card">
                        <div class="stat-icon tasks">
                            <i class="fas fa-tasks"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="tasks-completed">0</h3>
                            <p>Tasks Completed</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon budget">
                            <i class="fas fa-wallet"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="budget-remaining">$0</h3>
                            <p>Budget Remaining</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon notes">
                            <i class="fas fa-sticky-note"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="notes-count">0</h3>
                            <p>Notes Created</p>
                        </div>
                    </div>
                </div>

                <!-- Navigation Tiles -->
                <div class="nav-tiles fade-in-up">
                    <div class="nav-tile tasks" data-module="tasks">
                        <div class="nav-tile-content">
                            <div class="nav-tile-icon">
                                <i class="fas fa-project-diagram"></i>
                            </div>
                            <h3>Task Manager</h3>
                            <p>Organize your projects with our Scrum board. Track deadlines, set priorities, and boost your productivity.</p>
                        </div>
                    </div>
                    <div class="nav-tile budget" data-module="budget">
                        <div class="nav-tile-content">
                            <div class="nav-tile-icon">
                                <i class="fas fa-chart-pie"></i>
                            </div>
                            <h3>Budget Tracker</h3>
                            <p>Take control of your finances. Track expenses, set savings goals, and get smart spending recommendations.</p>
                        </div>
                    </div>
                    <div class="nav-tile notes" data-module="notes">
                        <div class="nav-tile-content">
                            <div class="nav-tile-icon">
                                <i class="fas fa-edit"></i>
                            </div>
                            <h3>Smart Notes</h3>
                            <p>Capture your thoughts with rich formatting. Tag, organize, and link your ideas effortlessly.</p>
                        </div>
                    </div>
                </div>

                <!-- Smart Recommendations -->
                <div class="recommendations-section fade-in-up">
                    <h2 class="section-title">
                        <i class="fas fa-brain"></i>
                        Smart Recommendations
                    </h2>
                    <div class="recommendations-grid" id="recommendations-grid">
                        <!-- Recommendations will be rendered here -->
                    </div>
                </div>

                <!-- Category Management -->
                <div class="category-management fade-in-up">
                    <h2 class="section-title">
                        <i class="fas fa-tags"></i>
                        Category Management
                    </h2>
                    <div class="category-tabs">
                        <button class="category-tab active" data-category="tasks">Tasks</button>
                        <button class="category-tab" data-category="budget">Budget</button>
                        <button class="category-tab" data-category="notes">Notes</button>
                    </div>
                    <div class="category-content">
                        <div class="category-list" id="category-list">
                            <!-- Categories will be rendered here -->
                        </div>
                        <div class="add-category">
                            <input type="text" id="new-category-input" placeholder="Add new category..." class="form-input">
                            <button id="add-category-btn" class="btn btn-primary">
                                <i class="fas fa-plus"></i>
                                Add Category
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Charts -->
                <div class="charts-grid fade-in-up">
                    <div class="chart-card">
                        <div class="chart-title">
                            <i class="fas fa-chart-line"></i>
                            Task Completion Trend
                        </div>
                        <canvas id="tasks-chart" width="400" height="200"></canvas>
                    </div>
                    <div class="chart-card">
                        <div class="chart-title">
                            <i class="fas fa-chart-doughnut"></i>
                            Spending Overview
                        </div>
                        <canvas id="budget-chart" width="400" height="200"></canvas>
                    </div>
                </div>
            </div>

            <!-- Task Manager Module -->
            <div id="tasks" class="module">
                <div class="module-header">
                    <h2 class="module-title">
                        <i class="fas fa-project-diagram"></i>
                        Task Manager
                    </h2>
                    <div style="display: flex; gap: 1rem;">
                        <button class="btn btn-primary" id="add-task-btn">
                            <i class="fas fa-plus"></i>
                            Add Task
                        </button>
                        <button class="back-btn" data-module="dashboard">
                            <i class="fas fa-arrow-left"></i>
                            Back to Dashboard
                        </button>
                    </div>
                </div>

                <div class="scrum-board" id="scrum-board">
                    <div class="scrum-column" data-status="todo">
                        <div class="scrum-column-header">
                            <div class="scrum-column-title">
                                <i class="fas fa-clipboard-list"></i>
                                To Do
                            </div>
                            <span class="task-count" id="todo-count">0</span>
                        </div>
                        <div class="tasks-container" id="todo-tasks"></div>
                    </div>
                    <div class="scrum-column" data-status="in-progress">
                        <div class="scrum-column-header">
                            <div class="scrum-column-title">
                                <i class="fas fa-play"></i>
                                In Progress
                            </div>
                            <span class="task-count" id="progress-count">0</span>
                        </div>
                        <div class="tasks-container" id="progress-tasks"></div>
                    </div>
                    <div class="scrum-column" data-status="done">
                        <div class="scrum-column-header">
                            <div class="scrum-column-title">
                                <i class="fas fa-check"></i>
                                Done
                            </div>
                            <span class="task-count" id="done-count">0</span>
                        </div>
                        <div class="tasks-container" id="done-tasks"></div>
                    </div>
                </div>
            </div>

            <!-- Budget Tracker Module -->
            <div id="budget" class="module">
                <div class="module-header">
                    <h2 class="module-title">
                        <i class="fas fa-chart-pie"></i>
                        Budget Tracker
                    </h2>
                    <div style="display: flex; gap: 1rem;">
                        <button class="btn btn-primary" id="add-transaction-btn">
                            <i class="fas fa-plus"></i>
                            Add Transaction
                        </button>
                        <button class="back-btn" data-module="dashboard">
                            <i class="fas fa-arrow-left"></i>
                            Back to Dashboard
                        </button>
                    </div>
                </div>

                <div class="budget-overview">
                    <div class="budget-card">
                        <div class="budget-amount" id="total-income">$0</div>
                        <div class="budget-label">Total Income</div>
                    </div>
                    <div class="budget-card">
                        <div class="budget-amount" id="total-expenses">$0</div>
                        <div class="budget-label">Total Expenses</div>
                    </div>
                    <div class="budget-card">
                        <div class="budget-amount" id="savings-amount">$0</div>
                        <div class="budget-label">Savings</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="savings-progress"></div>
                        </div>
                    </div>
                </div>

                <div class="charts-grid">
                    <div class="chart-card">
                        <div class="chart-title">
                            <i class="fas fa-chart-bar"></i>
                            Monthly Spending
                        </div>
                        <canvas id="spending-chart" width="400" height="200"></canvas>
                    </div>
                    <div class="chart-card">
                        <div class="chart-title">
                            <i class="fas fa-chart-pie"></i>
                            Category Breakdown
                        </div>
                        <canvas id="category-chart" width="400" height="200"></canvas>
                    </div>
                </div>
            </div>

            <!-- Notes Module -->
            <div id="notes" class="module">
                <div class="module-header">
                    <h2 class="module-title">
                        <i class="fas fa-edit"></i>
                        Smart Notes
                    </h2>
                    <div style="display: flex; gap: 1rem;">
                        <button class="btn btn-primary" id="add-note-btn">
                            <i class="fas fa-plus"></i>
                            New Note
                        </button>
                        <button class="back-btn" data-module="dashboard">
                            <i class="fas fa-arrow-left"></i>
                            Back to Dashboard
                        </button>
                    </div>
                </div>

                <!-- Notes Filter Section -->
                <div class="notes-filter-section">
                    <div class="notes-search">
                        <input type="text" id="notes-search" class="form-input" placeholder="Search notes...">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="notes-tags-filter">
                        <div class="filter-label">Filter by tags:</div>
                        <div class="tags-filter-container" id="tags-filter-container">
                            <button class="tag-filter active" data-tag="all">All</button>
                            <!-- Tag filters will be rendered here -->
                        </div>
                    </div>
                </div>

                <div class="notes-grid" id="notes-grid">
                    <!-- Notes will be rendered here -->
                </div>
            </div>
        </main>
    </div>

    <!-- Add Task Modal -->
    <div id="task-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add New Task</h3>
                <button class="modal-close" data-modal="task-modal">×</button>
            </div>
            <form id="task-form">
                <div class="form-group">
                    <label class="form-label">Task Title</label>
                    <input type="text" class="form-input" id="task-title" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-textarea" id="task-description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Priority</label>
                    <select class="form-select" id="task-priority">
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <select class="form-select" id="task-category">
                        <!-- Categories will be populated dynamically -->
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Due Date</label>
                    <input type="date" class="form-input" id="task-due-date">
                </div>
                <div class="form-group">
                    <label class="form-label">
                        <input type="checkbox" id="task-recurring"> Recurring Task
                    </label>
                </div>
                <button type="submit" class="btn btn-primary">Create Task</button>
            </form>
        </div>
    </div>

    <!-- Add Transaction Modal -->
    <div id="transaction-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Add Transaction</h3>
                <button class="modal-close" data-modal="transaction-modal">×</button>
            </div>
            <form id="transaction-form">
                <div class="form-group">
                    <label class="form-label">Type</label>
                    <select class="form-select" id="transaction-type">
                        <option value="expense">Expense</option>
                        <option value="income">Income</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Amount</label>
                    <input type="number" class="form-input" id="transaction-amount" step="0.01" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <select class="form-select" id="transaction-category">
                        <!-- Categories will be populated dynamically -->
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <input type="text" class="form-input" id="transaction-description">
                </div>
                <button type="submit" class="btn btn-primary">Add Transaction</button>
            </form>
        </div>
    </div>

    <!-- Add/Edit Note Modal -->
    <div id="note-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="note-modal-title">Create Note</h3>
                <button class="modal-close" data-modal="note-modal">×</button>
            </div>
            <form id="note-form">
                <input type="hidden" id="note-id">
                <div class="form-group">
                    <label class="form-label">Title</label>
                    <input type="text" class="form-input" id="note-title" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Content</label>
                    <textarea class="form-textarea" id="note-content" rows="10"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Tags (comma-separated)</label>
                    <input type="text" class="form-input" id="note-tags" placeholder="work, important, ideas">
                </div>
                <div style="display: flex; gap: 1rem;">
                    <button type="submit" class="btn btn-primary" id="note-submit-btn">Save Note</button>
                    <button type="button" class="btn btn-secondary" id="note-cancel-btn">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        /**
         * ZENITH PRODUCTIVITY APP
         * ======================
         * A comprehensive personal productivity application featuring:
         * - Task Management with Scrum board
         * - Budget Tracking with visualizations
         * - Smart Notes with tagging and filtering
         * - AI-powered recommendations
         * - Category management
         * - Dark/Light theme support
         * - Gamification with streak tracking
         * 
         * @author GitHub Copilot
         * @version 1.0.0
         * @date June 17, 2025
         */

        /**
         * APPLICATION STATE MANAGEMENT
         * ============================
         * Central state object that manages all application data
         * Uses localStorage for data persistence across sessions
         */
        const appState = {
            currentModule: 'dashboard',                                          // Current active module
            theme: localStorage.getItem('theme') || 'light',                    // UI theme preference
            tasks: JSON.parse(localStorage.getItem('tasks')) || [],             // Task management data
            transactions: JSON.parse(localStorage.getItem('transactions')) || [], // Budget tracking data
            notes: JSON.parse(localStorage.getItem('notes')) || [],             // Notes data
            categories: JSON.parse(localStorage.getItem('categories')) || {     // Category definitions
                tasks: ['personal', 'work', 'school', 'business', 'family', 'baby'],
                budget: ['food', 'transport', 'shopping', 'entertainment', 'bills', 'healthcare', 'education', 'other'],
                notes: ['work', 'personal', 'ideas', 'meeting', 'important', 'project']
            },
            streak: parseInt(localStorage.getItem('streak')) || 0,              // Daily activity streak
            lastActivity: localStorage.getItem('lastActivity') || null,         // Last activity date
            xp: parseInt(localStorage.getItem('xp')) || 0,                      // Experience points
            level: parseInt(localStorage.getItem('level')) || 1,               // User level
            badges: JSON.parse(localStorage.getItem('badges')) || []           // Earned badges
        };

        /**
         * APPLICATION INITIALIZATION
         * =========================
         */

        /**
         * Initialize the application when DOM is loaded
         * Sets up event listeners and renders initial state
         */
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        /**
         * Main application initialization function
         * Orchestrates the setup of all app components
         */
        function initializeApp() {
            // Only clear sample data on first run, not every time
            // clearSampleData();
            setTheme(appState.theme);           // Apply saved theme
            updateStreak();                     // Update activity streak
            updateXPDisplay();                  // Update XP and level display
            updateBadgeCount();                 // Update badge count
            updateFormCategories();             // Initialize form categories
            renderDashboard();                  // Render dashboard content
            bindEventListeners();               // Set up event handlers
            initializeCharts();                 // Initialize chart components
        }

        /**
         * Clear sample data from localStorage (development utility)
         * Used to reset the app to a clean state
         */
        function clearSampleData() {
            // This function is now only called manually if needed
            // Clear localStorage to start fresh
            localStorage.removeItem('tasks');
            localStorage.removeItem('transactions');
            localStorage.removeItem('notes');
            
            // Reset app state
            appState.tasks = [];
            appState.transactions = [];
            appState.notes = [];
        }

        /**
         * THEME MANAGEMENT SYSTEM
         * ======================
         * Handles dark/light theme switching with persistence
         */

        /**
         * Apply theme to the application
         * @param {string} theme - Theme name ('light' or 'dark')
         */
        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            const themeIcon = document.getElementById('theme-toggle').querySelector('i');
            themeIcon.className = theme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            appState.theme = theme;
            localStorage.setItem('theme', theme);
        }

        /**
         * Toggle between light and dark themes
         */
        function toggleTheme() {
            const newTheme = appState.theme === 'light' ? 'dark' : 'light';
            setTheme(newTheme);
        }

        /**
         * GAMIFICATION SYSTEM - STREAK MANAGEMENT
         * ======================================
         * Tracks daily activity streaks to encourage engagement
         */

        /**
         * Update the user's activity streak counter
         * Checks if the user was active yesterday to maintain streak
         */
        function updateStreak() {
            const today = new Date().toDateString();
            const lastActivity = appState.lastActivity;
            
            if (lastActivity === today) {
                // Already counted today
            } else if (lastActivity === new Date(Date.now() - 86400000).toDateString()) {
                // Yesterday, continue streak
            } else {
                // Reset streak if more than one day gap
                appState.streak = 0;
            }
            
            document.getElementById('streak-count').textContent = appState.streak;
            
            // Check for streak badges
            checkBadges('streak-update');
        }

        /**
         * Increment the user's activity streak
         * Called when user performs significant actions (adding tasks, etc.)
         */
        function incrementStreak() {
            const today = new Date().toDateString();
            if (appState.lastActivity !== today) {
                appState.streak++;
                appState.lastActivity = today;
                localStorage.setItem('streak', appState.streak);
                localStorage.setItem('lastActivity', today);
                document.getElementById('streak-count').textContent = appState.streak;
            }
        }

        /**
         * XP AND BADGE SYSTEM
         * ===================
         * Advanced gamification with experience points, levels, and achievement badges
         */

        /**
         * Level requirements following the formula 5^n where n is 1 to 10
         * Each level requires exponentially more XP to achieve
         */
        const LEVEL_REQUIREMENTS = [
            5,      // Level 1 to 2
            25,     // Level 2 to 3
            125,    // Level 3 to 4
            625,    // Level 4 to 5
            3125,   // Level 5 to 6
            15625,  // Level 6 to 7
            78125,  // Level 7 to 8
            390625, // Level 8 to 9
            1953125,// Level 9 to 10
            9765625 // Level 10 to 11
        ];

        /**
         * Badge definitions with requirements and rewards
         */
        const BADGE_DEFINITIONS = {
            // Task completion badges
            'first-task': { name: 'Task Starter', description: 'Complete your first task', icon: 'fas fa-check', xpReward: 10 },
            'task-warrior': { name: 'Task Warrior', description: 'Complete 10 tasks', icon: 'fas fa-sword', xpReward: 50 },
            'task-master': { name: 'Task Master', description: 'Complete 50 tasks', icon: 'fas fa-crown', xpReward: 100 },
            
            // Budget tracking badges
            'budget-beginner': { name: 'Budget Beginner', description: 'Add your first transaction', icon: 'fas fa-coins', xpReward: 10 },
            'financial-tracker': { name: 'Financial Tracker', description: 'Add 25 transactions', icon: 'fas fa-chart-line', xpReward: 50 },
            'money-manager': { name: 'Money Manager', description: 'Add 100 transactions', icon: 'fas fa-piggy-bank', xpReward: 100 },
            
            // Note taking badges
            'note-taker': { name: 'Note Taker', description: 'Create your first note', icon: 'fas fa-sticky-note', xpReward: 10 },
            'knowledge-keeper': { name: 'Knowledge Keeper', description: 'Create 20 notes', icon: 'fas fa-book', xpReward: 50 },
            'wisdom-collector': { name: 'Wisdom Collector', description: 'Create 100 notes', icon: 'fas fa-scroll', xpReward: 100 },
            
            // Streak badges
            'streak-starter': { name: 'Streak Starter', description: 'Maintain a 7-day streak', icon: 'fas fa-fire', xpReward: 25 },
            'consistency-king': { name: 'Consistency King', description: 'Maintain a 30-day streak', icon: 'fas fa-trophy', xpReward: 100 },
            
            // Level badges
            'level-up': { name: 'Level Up!', description: 'Reach level 2', icon: 'fas fa-star', xpReward: 20 },
            'rising-star': { name: 'Rising Star', description: 'Reach level 5', icon: 'fas fa-rocket', xpReward: 100 },
            'productivity-legend': { name: 'Productivity Legend', description: 'Reach level 10', icon: 'fas fa-gem', xpReward: 500 }
        };

        /**
         * Add experience points and check for level ups and new badges
         * @param {number} points - XP points to add
         * @param {string} source - Source of XP ('task', 'budget', 'note', 'badge')
         */
        function addXP(points, source = 'general') {
            const oldXP = appState.xp;
            const oldLevel = appState.level;
            
            appState.xp += points;
            localStorage.setItem('xp', appState.xp);
            
            // Check for level up
            const newLevel = calculateLevel(appState.xp);
            if (newLevel > oldLevel) {
                appState.level = newLevel;
                localStorage.setItem('level', appState.level);
                showLevelUpNotification(newLevel);
                checkLevelBadges(newLevel);
            }
            
            // Update XP display
            updateXPDisplay();
            
            // Show XP gain animation
            showXPGainAnimation(points, source);
            
            console.log(`XP gained: +${points} from ${source}. Total XP: ${appState.xp}, Level: ${appState.level}`);
        }

        /**
         * Calculate user level based on total XP
         * @param {number} totalXP - Total experience points
         * @returns {number} Current level
         */
        function calculateLevel(totalXP) {
            let level = 1;
            let xpNeeded = 0;
            
            for (let i = 0; i < LEVEL_REQUIREMENTS.length; i++) {
                xpNeeded += LEVEL_REQUIREMENTS[i];
                if (totalXP >= xpNeeded) {
                    level = i + 2; // Level starts at 1, array starts at 0
                } else {
                    break;
                }
            }
            
            return level;
        }

        /**
         * Get XP needed for next level
         * @returns {Object} Object with current XP, XP needed for next level, and progress percentage
         */
        function getNextLevelProgress() {
            const currentLevel = appState.level;
            
            if (currentLevel > LEVEL_REQUIREMENTS.length) {
                return { current: appState.xp, needed: 0, progress: 100, maxLevel: true };
            }
            
            // Calculate total XP needed for current level
            let xpForCurrentLevel = 0;
            for (let i = 0; i < currentLevel - 1; i++) {
                xpForCurrentLevel += LEVEL_REQUIREMENTS[i];
            }
            
            // Calculate total XP needed for next level
            const xpForNextLevel = xpForCurrentLevel + LEVEL_REQUIREMENTS[currentLevel - 1];
            
            const currentLevelXP = appState.xp - xpForCurrentLevel;
            const xpNeededForNext = LEVEL_REQUIREMENTS[currentLevel - 1];
            const progress = Math.min((currentLevelXP / xpNeededForNext) * 100, 100);
            
            return {
                current: currentLevelXP,
                needed: xpNeededForNext,
                progress: progress,
                maxLevel: false
            };
        }

        /**
         * Update XP and level display in the UI
         */
        function updateXPDisplay() {
            const levelElement = document.getElementById('user-level');
            const xpElement = document.getElementById('user-xp');
            const progressBar = document.getElementById('xp-progress');
            
            if (levelElement) levelElement.textContent = appState.level;
            if (xpElement) xpElement.textContent = appState.xp;
            
            if (progressBar) {
                const progress = getNextLevelProgress();
                progressBar.style.width = `${progress.progress}%`;
                progressBar.setAttribute('title', `${progress.current}/${progress.needed} XP to next level`);
            }
        }

        /**
         * Check and award badges based on user actions
         * @param {string} action - Action type ('task-complete', 'transaction-add', 'note-create', etc.)
         * @param {Object} data - Additional data for badge checking
         */
        function checkBadges(action, data = {}) {
            const newBadges = [];
            
            // Count current achievements
            const completedTasks = appState.tasks.filter(task => task.status === 'done').length;
            const totalTransactions = appState.transactions.length;
            const totalNotes = appState.notes.length;
            const currentStreak = appState.streak;
            
            // Task badges
            if (action === 'task-complete') {
                if (completedTasks === 1 && !hasBadge('first-task')) {
                    newBadges.push('first-task');
                } else if (completedTasks === 10 && !hasBadge('task-warrior')) {
                    newBadges.push('task-warrior');
                } else if (completedTasks === 50 && !hasBadge('task-master')) {
                    newBadges.push('task-master');
                }
            }
            
            // Budget badges
            if (action === 'transaction-add') {
                if (totalTransactions === 1 && !hasBadge('budget-beginner')) {
                    newBadges.push('budget-beginner');
                } else if (totalTransactions === 25 && !hasBadge('financial-tracker')) {
                    newBadges.push('financial-tracker');
                } else if (totalTransactions === 100 && !hasBadge('money-manager')) {
                    newBadges.push('money-manager');
                }
            }
            
            // Note badges
            if (action === 'note-create') {
                if (totalNotes === 1 && !hasBadge('note-taker')) {
                    newBadges.push('note-taker');
                } else if (totalNotes === 20 && !hasBadge('knowledge-keeper')) {
                    newBadges.push('knowledge-keeper');
                } else if (totalNotes === 100 && !hasBadge('wisdom-collector')) {
                    newBadges.push('wisdom-collector');
                }
            }
            
            // Streak badges
            if (action === 'streak-update') {
                if (currentStreak === 7 && !hasBadge('streak-starter')) {
                    newBadges.push('streak-starter');
                } else if (currentStreak === 30 && !hasBadge('consistency-king')) {
                    newBadges.push('consistency-king');
                }
            }
            
            // Award new badges
            newBadges.forEach(badgeId => {
                awardBadge(badgeId);
            });
        }

        /**
         * Check for level-based badges
         * @param {number} level - Current user level
         */
        function checkLevelBadges(level) {
            if (level === 2 && !hasBadge('level-up')) {
                awardBadge('level-up');
            } else if (level === 5 && !hasBadge('rising-star')) {
                awardBadge('rising-star');
            } else if (level === 10 && !hasBadge('productivity-legend')) {
                awardBadge('productivity-legend');
            }
        }

        /**
         * Check if user has a specific badge
         * @param {string} badgeId - Badge identifier
         * @returns {boolean} True if user has the badge
         */
        function hasBadge(badgeId) {
            return appState.badges.some(badge => badge.id === badgeId);
        }

        /**
         * Award a badge to the user
         * @param {string} badgeId - Badge identifier to award
         */
        function awardBadge(badgeId) {
            const badgeDefinition = BADGE_DEFINITIONS[badgeId];
            if (!badgeDefinition || hasBadge(badgeId)) return;
            
            const badge = {
                id: badgeId,
                ...badgeDefinition,
                dateEarned: new Date().toISOString()
            };
            
            appState.badges.push(badge);
            localStorage.setItem('badges', JSON.stringify(appState.badges));
            
            // Award bonus XP for earning badge
            addXP(badge.xpReward, 'badge');
            
            // Update badge count display
            updateBadgeCount();
            
            // Show badge earned notification
            showBadgeNotification(badge);
            
            console.log(`Badge earned: ${badge.name}`);
        }

        /**
         * Update badge count display in the header
         */
        function updateBadgeCount() {
            const badgeCountElement = document.getElementById('badge-count');
            if (badgeCountElement) {
                badgeCountElement.textContent = appState.badges.length;
            }
        }

        /**
         * Show XP gain animation
         * @param {number} points - XP points gained
         * @param {string} source - Source of XP gain
         */
        function showXPGainAnimation(points, source) {
            // Create floating XP indicator
            const xpIndicator = document.createElement('div');
            xpIndicator.className = 'xp-gain-indicator';
            xpIndicator.innerHTML = `+${points} XP`;
            xpIndicator.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: var(--gradient-accent);
                color: white;
                padding: 0.5rem 1rem;
                border-radius: 25px;
                font-weight: bold;
                font-size: 0.9rem;
                z-index: 1000;
                animation: xpFloat 2s ease-out forwards;
                pointer-events: none;
            `;
            
            document.body.appendChild(xpIndicator);
            
            // Remove after animation
            setTimeout(() => {
                if (xpIndicator.parentNode) {
                    xpIndicator.parentNode.removeChild(xpIndicator);
                }
            }, 2000);
        }

        /**
         * Show level up notification
         * @param {number} newLevel - New level achieved
         */
        function showLevelUpNotification(newLevel) {
            const notification = document.createElement('div');
            notification.className = 'level-up-notification';
            notification.innerHTML = `
                <div class="level-up-content">
                    <i class="fas fa-star"></i>
                    <h3>Level Up!</h3>
                    <p>You've reached level ${newLevel}!</p>
                </div>
            `;
            notification.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: var(--gradient-primary);
                color: white;
                padding: 2rem;
                border-radius: 20px;
                text-align: center;
                z-index: 1001;
                animation: levelUpPulse 3s ease-out forwards;
                box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            `;
            
            document.body.appendChild(notification);
            
            // Remove after animation
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 3000);
        }

        /**
         * Show badge earned notification
         * @param {Object} badge - Badge object with name, description, icon
         */
        function showBadgeNotification(badge) {
            const notification = document.createElement('div');
            notification.className = 'badge-notification';
            notification.innerHTML = `
                <div class="badge-content">
                    <i class="${badge.icon}"></i>
                    <h4>Badge Earned!</h4>
                    <h3>${badge.name}</h3>
                    <p>${badge.description}</p>
                    <small>+${badge.xpReward} XP Bonus</small>
                </div>
            `;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: var(--gradient-secondary);
                color: white;
                padding: 1.5rem;
                border-radius: 15px;
                text-align: center;
                z-index: 1001;
                animation: badgeSlideDown 4s ease-out forwards;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                max-width: 300px;
            `;
            
            document.body.appendChild(notification);
            
            // Remove after animation
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 4000);
        }

        /**
         * NAVIGATION SYSTEM
         * ================
         * Manages module switching and view state
         */

        /**
         * Switch between application modules
         * @param {string} moduleId - ID of the module to display ('dashboard', 'tasks', 'budget', 'notes')
         */
        function showModule(moduleId) {
            // Hide all modules
            document.querySelectorAll('.module').forEach(module => {
                module.classList.remove('active');
            });
            
            // Show selected module
            document.getElementById(moduleId).classList.add('active');
            appState.currentModule = moduleId;
            
            // Render module-specific content
            if (moduleId === 'dashboard') {
                renderDashboard();
            } else if (moduleId === 'tasks') {
                renderTasks();
            } else if (moduleId === 'budget') {
                renderBudget();
            } else if (moduleId === 'notes') {
                renderNotes();
            }
        }

        /**
         * DASHBOARD MODULE
         * ===============
         * Main overview screen with stats, recommendations, and navigation
         */

        /**
         * Render the dashboard with all components
         * Orchestrates the rendering of stats, recommendations, categories, and charts
         */
        function renderDashboard() {
            updateDashboardStats();         // Update statistics cards
            renderRecommendations();        // Generate AI recommendations
            renderCategoryManagement();     // Show category management
            updateCharts();                 // Update dashboard charts
        }

        /**
         * Update dashboard statistics cards with current data
         * Calculates and displays key metrics across all modules
         */
        function updateDashboardStats() {
            const completedTasks = appState.tasks.filter(task => task.status === 'done').length;
            const totalIncome = appState.transactions
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);
            const totalExpenses = appState.transactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);
            
            document.getElementById('tasks-completed').textContent = completedTasks;
            document.getElementById('budget-remaining').textContent = `$${(totalIncome - totalExpenses).toFixed(2)}`;
            document.getElementById('notes-count').textContent = appState.notes.length;
        }

        /**
         * AI RECOMMENDATION SYSTEM
         * ========================
         * Generates intelligent suggestions based on user behavior and data patterns
         */

        /**
         * Render smart recommendations on the dashboard
         * Generates and displays AI-powered suggestions for productivity improvement
         */
        function renderRecommendations() {
            const recommendationsContainer = document.getElementById('recommendations-grid');
            recommendationsContainer.innerHTML = '';
            
            const recommendations = generateRecommendations();
            
            recommendations.forEach(rec => {
                const recElement = createRecommendationElement(rec);
                recommendationsContainer.appendChild(recElement);
            });
        }

        /**
         * Generate AI recommendations based on user data
         * @returns {Array} Array of recommendation objects
         */
        function generateRecommendations() {
            const recommendations = [];
            
            // Task-based recommendations
            const taskRecs = generateTaskRecommendations();
            recommendations.push(...taskRecs);
            
            // Budget-based recommendations
            const budgetRecs = generateBudgetRecommendations();
            recommendations.push(...budgetRecs);
            
            // Notes-based recommendations
            const notesRecs = generateNotesRecommendations();
            recommendations.push(...notesRecs);
            
            return recommendations.slice(0, 6); // Limit to 6 recommendations
        }

        /**
         * Generate task management recommendations
         * @returns {Array} Task-specific recommendations
         */
        function generateTaskRecommendations() {
            const recommendations = [];
            const overdueTasks = appState.tasks.filter(task => {
                if (!task.dueDate) return false;
                const dueDate = new Date(task.dueDate);
                const today = new Date();
                return dueDate < today && task.status !== 'done';
            });
            
            const highPriorityTasks = appState.tasks.filter(task => 
                task.priority === 'high' && task.status === 'todo'
            );
            
            // Overdue tasks alert
            if (overdueTasks.length > 0) {
                recommendations.push({
                    type: 'task',
                    icon: 'fas fa-exclamation-triangle',
                    title: 'Overdue Tasks Alert',
                    content: `You have ${overdueTasks.length} overdue task(s). Consider prioritizing these to stay on track.`,
                    action: 'View Tasks',
                    actionFn: () => showModule('tasks')
                });
            }
            
            // High priority focus
            if (highPriorityTasks.length > 0) {
                recommendations.push({
                    type: 'task',
                    icon: 'fas fa-star',
                    title: 'High Priority Focus',
                    content: `You have ${highPriorityTasks.length} high-priority tasks waiting. Tackle these first for maximum impact.`,
                    action: 'View Tasks',
                    actionFn: () => showModule('tasks')
                });
            }
            
            // Recurring task recommendation
            const recurringTasks = appState.tasks.filter(task => task.recurring);
            if (recurringTasks.length === 0) {
                recommendations.push({
                    type: 'task',
                    icon: 'fas fa-sync',
                    title: 'Set Up Recurring Tasks',
                    content: 'Consider setting up recurring tasks for routine activities like exercise, meal prep, or weekly reviews.',
                    action: 'Add Task',
                    actionFn: () => document.getElementById('task-modal').classList.add('active')
                });
            }
            
            return recommendations;
        }

        /**
         * Generate budget management recommendations
         * @returns {Array} Budget-specific recommendations
         */
        function generateBudgetRecommendations() {
            const recommendations = [];
            const expenses = appState.transactions.filter(t => t.type === 'expense');
            const income = appState.transactions.filter(t => t.type === 'income');
            
            const totalExpenses = expenses.reduce((sum, t) => sum + t.amount, 0);
            const totalIncome = income.reduce((sum, t) => sum + t.amount, 0);
            
            // High spending alert
            if (totalExpenses > totalIncome * 0.8) {
                recommendations.push({
                    type: 'budget',
                    icon: 'fas fa-chart-line',
                    title: 'High Spending Alert',
                    content: 'Your expenses are over 80% of your income. Consider reviewing your spending in high-cost categories.',
                    action: 'View Budget',
                    actionFn: () => showModule('budget')
                });
            }
            
            // Category spending analysis
            const categorySpending = {};
            expenses.forEach(expense => {
                categorySpending[expense.category] = (categorySpending[expense.category] || 0) + expense.amount;
            });
            
            const topCategory = Object.keys(categorySpending).reduce((a, b) => 
                categorySpending[a] > categorySpending[b] ? a : b, Object.keys(categorySpending)[0]
            );
            
            if (topCategory && categorySpending[topCategory] > totalExpenses * 0.3) {
                recommendations.push({
                    type: 'budget',
                    icon: 'fas fa-pie-chart',
                    title: `${topCategory.charAt(0).toUpperCase() + topCategory.slice(1)} Spending`,
                    content: `Your ${topCategory} expenses are ${Math.round(categorySpending[topCategory]/totalExpenses*100)}% of total spending. Consider setting a budget limit.`,
                    action: 'View Budget',
                    actionFn: () => showModule('budget')
                });
            }
            
            // Savings recommendation
            if (totalIncome > 0 && (totalIncome - totalExpenses) < totalIncome * 0.2) {
                recommendations.push({
                    type: 'budget',
                    icon: 'fas fa-piggy-bank',
                    title: 'Boost Your Savings',
                    content: 'Try to save at least 20% of your income. Consider the 50/30/20 rule: needs, wants, savings.',
                    action: 'View Budget',
                    actionFn: () => showModule('budget')
                });
            }
            
            return recommendations;
        }

        /**
         * Generate notes management recommendations
         * @returns {Array} Notes-specific recommendations
         */
        function generateNotesRecommendations() {
            const recommendations = [];
            
            // Related notes based on recent tasks
            const recentTasks = appState.tasks.slice(-3);
            const taskCategories = [...new Set(recentTasks.map(task => task.category))];
            
            const relatedNotes = appState.notes.filter(note => 
                note.tags && note.tags.some(tag => taskCategories.includes(tag))
            );
            
            if (relatedNotes.length > 0) {
                recommendations.push({
                    type: 'notes',
                    icon: 'fas fa-link',
                    title: 'Related Notes Found',
                    content: `Found ${relatedNotes.length} notes related to your recent tasks. Review them for context and insights.`,
                    action: 'View Notes',
                    actionFn: () => showModule('notes')
                });
            }
            
            // Note organization suggestion
            const untaggedNotes = appState.notes.filter(note => !note.tags || note.tags.length === 0);
            if (untaggedNotes.length > 0) {
                recommendations.push({
                    type: 'notes',
                    icon: 'fas fa-tags',
                    title: 'Organize Your Notes',
                    content: `You have ${untaggedNotes.length} untagged notes. Adding tags will help you find them later.`,
                    action: 'View Notes',
                    actionFn: () => showModule('notes')
                });
            }
            
            // Knowledge capture recommendation
            const completedTasks = appState.tasks.filter(task => task.status === 'done');
            const tasksWithoutNotes = completedTasks.filter(task => {
                return !appState.notes.some(note => 
                    note.tags && note.tags.includes(task.category)
                );
            });
            
            if (tasksWithoutNotes.length > 2) {
                recommendations.push({
                    type: 'notes',
                    icon: 'fas fa-lightbulb',
                    title: 'Capture Your Learnings',
                    content: 'Consider creating notes about your completed tasks to capture insights and lessons learned.',
                    action: 'Add Note',
                    actionFn: () => document.getElementById('note-modal').classList.add('active')
                });
            }
            
            return recommendations;
        }

        /**
         * Create a recommendation card element
         * @param {Object} rec - Recommendation object with type, icon, title, content, action, and actionFn
         * @returns {HTMLElement} Recommendation card DOM element
         */
        function createRecommendationElement(rec) {
            const div = document.createElement('div');
            div.className = `recommendation-card ${rec.type}`;
            
            div.innerHTML = `
                <div class="recommendation-type">
                    <i class="${rec.icon}"></i>
                    ${rec.type.charAt(0).toUpperCase() + rec.type.slice(1)} Recommendation
                </div>
                <div class="recommendation-title">${rec.title}</div>
                <div class="recommendation-content">${rec.content}</div>
                <button class="recommendation-action" onclick="(${rec.actionFn.toString()})()">${rec.action}</button>
            `;
            
            return div;
        }

        /**
         * CATEGORY MANAGEMENT SYSTEM
         * =========================
         * Provides dynamic category management for tasks, budget, and notes
         * Allows users to add/remove categories and keeps forms synchronized
         */

        // Current category type being managed ('tasks', 'budget', or 'notes')
        let currentCategoryType = 'tasks';

        /**
         * Render the category management section
         * Main entry point for displaying category management UI
         */
        function renderCategoryManagement() {
            renderCategoryList();
        }

        /**
         * Render the list of categories for the current category type
         * Displays categories with remove buttons for user management
         */
        function renderCategoryList() {
            const categoryList = document.getElementById('category-list');
            const categories = appState.categories[currentCategoryType];
            
            categoryList.innerHTML = '';
            
            categories.forEach(category => {
                const categoryElement = document.createElement('div');
                categoryElement.className = 'category-item';
                categoryElement.innerHTML = `
                    <span>${category}</span>
                    <button class="category-remove" onclick="removeCategory('${category}')">×</button>
                `;
                categoryList.appendChild(categoryElement);
            });
        }

        /**
         * Add a new category to the current category type
         * Validates uniqueness and updates storage and UI
         */
        function addCategory() {
            const input = document.getElementById('new-category-input');
            const newCategory = input.value.trim().toLowerCase();
            
            if (newCategory && !appState.categories[currentCategoryType].includes(newCategory)) {
                appState.categories[currentCategoryType].push(newCategory);
                localStorage.setItem('categories', JSON.stringify(appState.categories));
                renderCategoryList();
                updateFormCategories();
                input.value = '';
            }
        }

        /**
         * Remove a category from the current category type
         * @param {string} category - The category name to remove
         */
        function removeCategory(category) {
            const index = appState.categories[currentCategoryType].indexOf(category);
            if (index > -1) {
                appState.categories[currentCategoryType].splice(index, 1);
                localStorage.setItem('categories', JSON.stringify(appState.categories));
                renderCategoryList();
                updateFormCategories();
            }
        }

        /**
         * Switch between different category types (tasks, budget, notes)
         * @param {string} type - Category type to switch to ('tasks', 'budget', or 'notes')
         */
        function switchCategoryType(type) {
            currentCategoryType = type;
            
            // Update tab active state
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`[data-category="${type}"]`).classList.add('active');
            
            renderCategoryList();
        }

        /**
         * Update all form category dropdowns with current categories
         * Synchronizes category options across all forms when categories change
         */
        function updateFormCategories() {
            // Update task categories
            const taskCategorySelect = document.getElementById('task-category');
            if (taskCategorySelect) {
                taskCategorySelect.innerHTML = '';
                appState.categories.tasks.forEach(category => {
                    const option = document.createElement('option');
                    option.value = category;
                    option.textContent = category.charAt(0).toUpperCase() + category.slice(1);
                    taskCategorySelect.appendChild(option);
                });
            }
            
            // Update transaction categories
            const transactionCategorySelect = document.getElementById('transaction-category');
            if (transactionCategorySelect) {
                transactionCategorySelect.innerHTML = '';
                appState.categories.budget.forEach(category => {
                    const option = document.createElement('option');
                    option.value = category;
                    option.textContent = category.charAt(0).toUpperCase() + category.slice(1);
                    transactionCategorySelect.appendChild(option);
                });
            }
        }

        /**
         * TASK MANAGEMENT MODULE
         * =====================
         * Comprehensive task management with scrum board, priorities, and categories
         * Supports drag-and-drop, recurring tasks, and task templates
         */

        /**
         * Render the task management interface
         * Displays tasks organized in scrum board columns (todo, in-progress, done)
         */
        function renderTasks() {
            const todoContainer = document.getElementById('todo-tasks');
            const progressContainer = document.getElementById('progress-tasks');
            const doneContainer = document.getElementById('done-tasks');
            
            todoContainer.innerHTML = '';
            progressContainer.innerHTML = '';
            doneContainer.innerHTML = '';
            
            appState.tasks.forEach(task => {
                const taskElement = createTaskElement(task);
                if (task.status === 'todo') {
                    todoContainer.appendChild(taskElement);
                } else if (task.status === 'in-progress') {
                    progressContainer.appendChild(taskElement);
                } else if (task.status === 'done') {
                    doneContainer.appendChild(taskElement);
                }
            });
            
            updateTaskCounts();
            // Re-initialize drag and drop after rendering tasks
            initializeDragAndDrop();
        }

        /**
         * Create a task card element for display in the scrum board
         * @param {Object} task - Task object with id, title, description, priority, etc.
         * @returns {HTMLElement} Task card DOM element with drag-and-drop support
         */
        function createTaskElement(task) {
            const div = document.createElement('div');
            div.className = 'task-card';
            div.draggable = true;
            div.dataset.taskId = task.id;
            
            const priorityClass = `task-priority ${task.priority}`;
            const dueDate = task.dueDate ? new Date(task.dueDate).toLocaleDateString() : 'No due date';
            
            // Add move buttons for better UX
            let moveButtons = '';
            if (task.status === 'todo') {
                moveButtons = '<button class="move-btn" onclick="moveTaskToStatus(\'' + task.id + '\', \'in-progress\')">→ In Progress</button>';
            } else if (task.status === 'in-progress') {
                moveButtons = '<button class="move-btn" onclick="moveTaskToStatus(\'' + task.id + '\', \'todo\')">← To Do</button> <button class="move-btn" onclick="moveTaskToStatus(\'' + task.id + '\', \'done\')">→ Done</button>';
            } else if (task.status === 'done') {
                moveButtons = '<button class="move-btn" onclick="moveTaskToStatus(\'' + task.id + '\', \'in-progress\')">← In Progress</button>';
            }
            
            div.innerHTML = `
                <div class="task-title">${task.title}</div>
                <div class="task-description">${task.description}</div>
                <div class="task-meta">
                    <span class="${priorityClass}">${task.priority.toUpperCase()}</span>
                    <span>${dueDate}</span>
                </div>
                <div style="margin-top: 0.5rem; font-size: 0.8rem; color: var(--text-secondary);">
                    <i class="fas fa-tag"></i> ${task.category}
                </div>
                <div class="task-actions" style="margin-top: 0.5rem; font-size: 0.8rem;">
                    ${moveButtons}
                </div>
            `;
            
            return div;
        }

        /**
         * Update task count badges on scrum board columns
         * Displays current count of tasks in each status column
         */
        function updateTaskCounts() {
            const todoCount = appState.tasks.filter(t => t.status === 'todo').length;
            const progressCount = appState.tasks.filter(t => t.status === 'in-progress').length;
            const doneCount = appState.tasks.filter(t => t.status === 'done').length;
            
            document.getElementById('todo-count').textContent = todoCount;
            document.getElementById('progress-count').textContent = progressCount;
            document.getElementById('done-count').textContent = doneCount;
        }

        /**
         * Add a new task to the system
         * @param {Object} taskData - Task data from form submission
         * @param {string} taskData.title - Task title
         * @param {string} taskData.description - Task description
         * @param {string} taskData.priority - Task priority (low, medium, high)
         * @param {string} taskData.category - Task category
         * @param {string} taskData.dueDate - Due date in ISO format
         * @param {boolean} taskData.recurring - Whether task is recurring
         */
        function addTask(taskData) {
            const task = {
                id: Date.now().toString(),
                title: taskData.title,
                description: taskData.description,
                priority: taskData.priority,
                category: taskData.category,
                dueDate: taskData.dueDate,
                recurring: taskData.recurring,
                status: 'todo',
                createdAt: new Date().toISOString()
            };
            
            appState.tasks.push(task);
            localStorage.setItem('tasks', JSON.stringify(appState.tasks));
            incrementStreak();
            
            console.log('Task added:', task);
            console.log('Current tasks:', appState.tasks);
            
            if (appState.currentModule === 'tasks') {
                renderTasks();
            }
            
            // Update dashboard stats
            updateDashboardStats();
        }

        /**
         * Move a task to a different status column
         * @param {string} taskId - ID of the task to move
         * @param {string} newStatus - New status ('todo', 'in-progress', 'done')
         */
        function moveTask(taskId, newStatus) {
            const task = appState.tasks.find(t => t.id === taskId);
            if (task && task.status !== newStatus) {
                const wasCompleted = task.status === 'done';
                task.status = newStatus;
                
                // Award XP for task completion and track completion date
                if (newStatus === 'done' && !wasCompleted) {
                    task.completedAt = new Date().toISOString();
                    addXP(5, 'task');
                    checkBadges('task-complete');
                    incrementStreak();
                } else if (newStatus !== 'done' && wasCompleted) {
                    // Remove completion date if task is moved away from done
                    delete task.completedAt;
                }
                
                localStorage.setItem('tasks', JSON.stringify(appState.tasks));
                renderTasks();
                
                // Update dashboard stats if we're viewing dashboard
                if (appState.currentModule === 'dashboard') {
                    updateDashboardStats();
                    updateCharts();
                }
                
                console.log('Task moved successfully:', taskId, 'to', newStatus);
            }
        }

        /**
         * Helper function for button-triggered task moves
         * @param {string} taskId - ID of the task to move
         * @param {string} newStatus - New status to move task to
         */
        function moveTaskToStatus(taskId, newStatus) {
            moveTask(taskId, newStatus);
        }

        /**
         * DRAG AND DROP SYSTEM
         * ===================
         * Enables intuitive task movement between scrum board columns
         */

        /**
         * Initialize drag and drop functionality for task cards
         * Sets up event listeners for drag operations on tasks and drop zones
         */
        function initializeDragAndDrop() {
            console.log('Initializing drag and drop...');
            
            const taskCards = document.querySelectorAll('.task-card');
            const containers = document.querySelectorAll('.tasks-container');
            
            console.log('Found task cards:', taskCards.length);
            console.log('Found containers:', containers.length);
            
            taskCards.forEach(card => {
                card.draggable = true;
                card.addEventListener('dragstart', handleDragStart);
                card.addEventListener('dragend', handleDragEnd);
            });
            
            containers.forEach(container => {
                container.addEventListener('dragover', handleDragOver);
                container.addEventListener('drop', handleDrop);
                container.addEventListener('dragenter', handleDragEnter);
                container.addEventListener('dragleave', handleDragLeave);
            });
        }

        /**
         * Handle drag start event
         * @param {DragEvent} e - Drag event object
         */
        function handleDragStart(e) {
            const taskId = e.target.dataset.taskId;
            console.log('Drag start - Task ID:', taskId);
            e.dataTransfer.setData('text/plain', taskId);
            e.target.classList.add('dragging');
        }

        /**
         * Handle drag end event
         * @param {DragEvent} e - Drag event object
         */
        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
            document.querySelectorAll('.tasks-container').forEach(container => {
                container.classList.remove('drag-over');
            });
        }

        /**
         * Handle drag enter event
         * @param {DragEvent} e - Drag event object
         */
        function handleDragEnter(e) {
            e.preventDefault();
            e.currentTarget.classList.add('drag-over');
        }

        /**
         * Handle drag leave event
         * @param {DragEvent} e - Drag event object
         */
        function handleDragLeave(e) {
            // Only remove if we're leaving the container itself, not a child
            if (!e.currentTarget.contains(e.relatedTarget)) {
                e.currentTarget.classList.remove('drag-over');
            }
        }

        /**
         * Handle drag over event
         * @param {DragEvent} e - Drag event object
         */
        function handleDragOver(e) {
            e.preventDefault();
        }

        /**
         * Handle drop event - completes the task move operation
         * @param {DragEvent} e - Drag event object
         */
        function handleDrop(e) {
            e.preventDefault();
            const taskId = e.dataTransfer.getData('text/plain');
            const container = e.currentTarget;
            const column = container.closest('.scrum-column');
            const newStatus = column.dataset.status;
            
            console.log('Drop - Task ID:', taskId, 'New Status:', newStatus);
            
            container.classList.remove('drag-over');
            
            if (taskId && newStatus) {
                moveTask(taskId, newStatus);
            }
        }

        /**
         * BUDGET MANAGEMENT MODULE
         * =======================
         * Comprehensive financial tracking with income, expenses, and visualizations
         * Includes savings goals, category budgets, and spending analytics
         */

        /**
         * Render the budget management interface
         * Updates overview stats and initializes charts
         */
        function renderBudget() {
            updateBudgetOverview();
            initializeBudgetCharts();
        }

        /**
         * Update budget overview statistics
         * Calculates and displays total income, expenses, and savings
         */
        function updateBudgetOverview() {
            const totalIncome = appState.transactions
                .filter(t => t.type === 'income')
                .reduce((sum, t) => sum + t.amount, 0);
            const totalExpenses = appState.transactions
                .filter(t => t.type === 'expense')
                .reduce((sum, t) => sum + t.amount, 0);
            const savings = totalIncome - totalExpenses;
            
            document.getElementById('total-income').textContent = `$${totalIncome.toFixed(2)}`;
            document.getElementById('total-expenses').textContent = `$${totalExpenses.toFixed(2)}`;
            document.getElementById('savings-amount').textContent = `$${savings.toFixed(2)}`;
            
            // Update savings progress (assuming goal of $5000)
            const savingsGoal = 5000;
            const progress = Math.min((savings / savingsGoal) * 100, 100);
            document.getElementById('savings-progress').style.width = `${progress}%`;
        }

        /**
         * Add a new financial transaction
         * @param {Object} transactionData - Transaction data from form
         * @param {string} transactionData.type - Transaction type ('income' or 'expense')
         * @param {number} transactionData.amount - Transaction amount
         * @param {string} transactionData.category - Transaction category
         * @param {string} transactionData.description - Transaction description
         */
        function addTransaction(transactionData) {
            const transaction = {
                id: Date.now().toString(),
                type: transactionData.type,
                amount: parseFloat(transactionData.amount),
                category: transactionData.category,
                description: transactionData.description,
                date: new Date().toISOString()
            };
            
            appState.transactions.push(transaction);
            localStorage.setItem('transactions', JSON.stringify(appState.transactions));
            
            // Award XP for budget tracking
            addXP(5, 'budget');
            checkBadges('transaction-add');
            incrementStreak();
            
            console.log('Transaction added:', transaction);
            
            if (appState.currentModule === 'budget') {
                renderBudget();
            }
            
            // Update dashboard stats
            updateDashboardStats();
            updateCharts();
        }

        /**
         * NOTES MANAGEMENT MODULE
         * ======================
         * Rich note-taking system with tagging, search, and linking capabilities
         * Supports CRUD operations, filtering, and cross-module integration
         */

        // Search and filter state for notes
        let notesSearchTerm = '';
        let notesActiveTag = 'all';

        /**
         * Render the notes management interface
         * Updates notes grid and tag filters
         */
        function renderNotes() {
            renderNotesGrid();
            renderNotesTagFilter();
        }

        /**
         * Render the notes grid with current filters applied
         * Displays filtered notes or empty state message
         */
        function renderNotesGrid() {
            const notesGrid = document.getElementById('notes-grid');
            notesGrid.innerHTML = '';
            
            const filteredNotes = filterNotes();
            
            if (filteredNotes.length === 0) {
                notesGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 2rem; color: var(--text-secondary);">
                        <i class="fas fa-sticky-note" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.3;"></i>
                        <p>No notes match your current filter.</p>
                    </div>
                `;
                return;
            }
            
            filteredNotes.forEach(note => {
                const noteElement = createNoteElement(note);
                notesGrid.appendChild(noteElement);
            });
        }

        /**
         * Filter notes based on search term and active tag
         * @returns {Array} Filtered array of notes
         */
        function filterNotes() {
            let filtered = appState.notes;
            
            // Filter by search term
            if (notesSearchTerm) {
                filtered = filtered.filter(note => 
                    note.title.toLowerCase().includes(notesSearchTerm.toLowerCase()) ||
                    note.content.toLowerCase().includes(notesSearchTerm.toLowerCase()) ||
                    (note.tags && note.tags.some(tag => 
                        tag.toLowerCase().includes(notesSearchTerm.toLowerCase())
                    ))
                );
            }
            
            // Filter by tag
            if (notesActiveTag !== 'all') {
                filtered = filtered.filter(note => 
                    note.tags && note.tags.includes(notesActiveTag)
                );
            }
            
            return filtered;
        }

        /**
         * Render the tag filter buttons
         * Dynamically creates tag filters based on available tags
         */
        function renderNotesTagFilter() {
            const container = document.getElementById('tags-filter-container');
            
            // Get all unique tags
            const allTags = new Set();
            appState.notes.forEach(note => {
                if (note.tags) {
                    note.tags.forEach(tag => allTags.add(tag));
                }
            });
            
            // Clear existing filters except "All"
            const allButton = container.querySelector('[data-tag="all"]');
            container.innerHTML = '';
            container.appendChild(allButton);
            
            // Add tag filters
            Array.from(allTags).sort().forEach(tag => {
                const button = document.createElement('button');
                button.className = 'tag-filter';
                button.dataset.tag = tag;
                button.textContent = tag;
                button.addEventListener('click', () => filterByTag(tag));
                container.appendChild(button);
            });
        }

        /**
         * Filter notes by a specific tag
         * @param {string} tag - Tag name to filter by
         */
        function filterByTag(tag) {
            notesActiveTag = tag;
            
            // Update active state
            document.querySelectorAll('.tag-filter').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-tag="${tag}"]`).classList.add('active');
            
            renderNotesGrid();
        }

        /**
         * Create a note card element for display
         * @param {Object} note - Note object with id, title, content, tags, etc.
         * @returns {HTMLElement} Note card DOM element
         */
        function createNoteElement(note) {
            const div = document.createElement('div');
            div.className = 'note-card';
            div.dataset.noteId = note.id;
            
            const preview = note.content.length > 150 ? 
                note.content.substring(0, 150) + '...' : note.content;
            
            const tags = note.tags ? note.tags.map(tag => 
                `<span class="note-tag">${tag}</span>`
            ).join('') : '';
            
            const createdDate = new Date(note.createdAt).toLocaleDateString();
            const updatedDate = note.updatedAt !== note.createdAt ? 
                ` (Updated: ${new Date(note.updatedAt).toLocaleDateString()})` : '';
            
            div.innerHTML = `
                <div class="note-actions">
                    <button class="note-action-btn" onclick="editNote('${note.id}')" title="Edit">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="note-action-btn delete" onclick="deleteNote('${note.id}')" title="Delete">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
                <div class="note-title">${note.title}</div>
                <div class="note-preview">${preview}</div>
                <div class="note-tags">${tags}</div>
                <div style="margin-top: 1rem; font-size: 0.8rem; color: var(--text-secondary);">
                    <i class="fas fa-calendar"></i> ${createdDate}${updatedDate}
                </div>
            `;
            
            return div;
        }

        /**
         * Add a new note or update an existing one
         * @param {Object} noteData - Note data from form
         * @param {string} noteData.id - Note ID (empty for new notes)
         * @param {string} noteData.title - Note title
         * @param {string} noteData.content - Note content
         * @param {string} noteData.tags - Comma-separated tags
         */
        function addNote(noteData) {
            const isEdit = noteData.id && noteData.id !== '';
            
            if (isEdit) {
                // Edit existing note
                const noteIndex = appState.notes.findIndex(note => note.id === noteData.id);
                if (noteIndex !== -1) {
                    appState.notes[noteIndex] = {
                        ...appState.notes[noteIndex],
                        title: noteData.title,
                        content: noteData.content,
                        tags: noteData.tags ? noteData.tags.split(',').map(tag => tag.trim()) : [],
                        updatedAt: new Date().toISOString()
                    };
                }
            } else {
                // Add new note
                const note = {
                    id: Date.now().toString(),
                    title: noteData.title,
                    content: noteData.content,
                    tags: noteData.tags ? noteData.tags.split(',').map(tag => tag.trim()) : [],
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                
                appState.notes.push(note);
                
                // Award XP based on content length (description * 5)
                const contentLength = noteData.content.length;
                const xpToAward = Math.max(contentLength * 5, 5); // Minimum 5 XP
                addXP(xpToAward, 'note');
                checkBadges('note-create');
                incrementStreak();
            }
            
            localStorage.setItem('notes', JSON.stringify(appState.notes));
            
            if (appState.currentModule === 'notes') {
                renderNotes();
            }
            
            // Update dashboard stats
            updateDashboardStats();
        }

        /**
         * Edit an existing note
         * @param {string} noteId - ID of the note to edit
         */
        function editNote(noteId) {
            const note = appState.notes.find(n => n.id === noteId);
            if (!note) return;
            
            // Populate form with note data
            document.getElementById('note-id').value = note.id;
            document.getElementById('note-title').value = note.title;
            document.getElementById('note-content').value = note.content;
            document.getElementById('note-tags').value = note.tags ? note.tags.join(', ') : '';
            
            // Update modal title and button
            document.getElementById('note-modal-title').textContent = 'Edit Note';
            document.getElementById('note-submit-btn').textContent = 'Update Note';
            
            // Show modal
            document.getElementById('note-modal').classList.add('active');
        }

        /**
         * Delete a note with confirmation
         * @param {string} noteId - ID of the note to delete
         */
        function deleteNote(noteId) {
            if (confirm('Are you sure you want to delete this note?')) {
                const noteIndex = appState.notes.findIndex(note => note.id === noteId);
                if (noteIndex !== -1) {
                    appState.notes.splice(noteIndex, 1);
                    localStorage.setItem('notes', JSON.stringify(appState.notes));
                    
                    if (appState.currentModule === 'notes') {
                        renderNotes();
                    }
                    
                    // Update dashboard stats
                    updateDashboardStats();
                }
            }
        }

        /**
         * Reset the note form to default state for new note creation
         */
        function resetNoteForm() {
            document.getElementById('note-form').reset();
            document.getElementById('note-id').value = '';
            document.getElementById('note-modal-title').textContent = 'Create Note';
            document.getElementById('note-submit-btn').textContent = 'Save Note';
        }

        /**
         * CHARTS AND VISUALIZATION SYSTEM
         * ===============================
         * Manages all chart components for dashboard and module visualizations
         * Uses Chart.js for interactive data visualization
         */

        /**
         * Initialize main dashboard charts
         * Creates task completion line chart and budget doughnut chart
         */
        function initializeCharts() {
            // Tasks Chart
            const tasksCtx = document.getElementById('tasks-chart').getContext('2d');
            window.tasksChart = new Chart(tasksCtx, {
                type: 'line',
                data: {
                    labels: getLast7Days(),
                    datasets: [{
                        label: 'Tasks Completed',
                        data: getTaskCompletionData(),
                        borderColor: '#6366f1',
                        backgroundColor: 'rgba(99, 102, 241, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(148, 163, 184, 0.1)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(148, 163, 184, 0.1)'
                            }
                        }
                    }
                }
            });

            // Budget Chart
            const budgetCtx = document.getElementById('budget-chart').getContext('2d');
            window.budgetChart = new Chart(budgetCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Food', 'Transport', 'Shopping', 'Entertainment', 'Other'],
                    datasets: [{
                        data: getExpensesByCategory(),
                        backgroundColor: [
                            '#6366f1',
                            '#ec4899',
                            '#10b981',
                            '#f59e0b',
                            '#ef4444'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        /**
         * Update existing dashboard charts with current data
         */
        function updateCharts() {
            if (window.tasksChart) {
                window.tasksChart.data.datasets[0].data = getTaskCompletionData();
                window.tasksChart.update();
            }
            
            if (window.budgetChart) {
                window.budgetChart.data.datasets[0].data = getExpensesByCategory();
                window.budgetChart.update();
            }
        }

        /**
         * Update budget module specific charts
         */
        function updateBudgetCharts() {
            // Update charts in budget module if they exist
            if (window.spendingChart) {
                window.spendingChart.data.datasets[0].data = getMonthlySpendingData();
                window.spendingChart.update();
            }
            
            if (window.categoryChart) {
                window.categoryChart.data.datasets[0].data = getExpensesByCategory();
                window.categoryChart.update();
            }
            
            // Also update dashboard charts
            updateCharts();
        }

        /**
         * Initialize budget module specific charts
         * Creates monthly spending bar chart and category breakdown doughnut chart
         */
        function initializeBudgetCharts() {
            // Initialize spending chart (monthly spending)
            const spendingCtx = document.getElementById('spending-chart');
            if (spendingCtx) {
                if (window.spendingChart) {
                    window.spendingChart.destroy();
                }
                
                window.spendingChart = new Chart(spendingCtx.getContext('2d'), {
                    type: 'bar',
                    data: {
                        labels: getLast6Months(),
                        datasets: [{
                            label: 'Monthly Spending',
                            data: getMonthlySpendingData(),
                            backgroundColor: 'rgba(236, 72, 153, 0.8)',
                            borderColor: '#ec4899',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(148, 163, 184, 0.1)'
                                },
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value;
                                    }
                                }
                            },
                            x: {
                                grid: {
                                    color: 'rgba(148, 163, 184, 0.1)'
                                }
                            }
                        }
                    }
                });
            }

            // Initialize category chart
            const categoryCtx = document.getElementById('category-chart');
            if (categoryCtx) {
                if (window.categoryChart) {
                    window.categoryChart.destroy();
                }
                
                const categoryData = getExpensesByCategory();
                const hasData = categoryData.some(value => value > 0);
                
                window.categoryChart = new Chart(categoryCtx.getContext('2d'), {
                    type: 'doughnut',
                    data: {
                        labels: getCategoryLabels(),
                        datasets: [{
                            data: hasData ? categoryData : [1], // Show placeholder if no data
                            backgroundColor: hasData ? [
                                '#6366f1',
                                '#ec4899',
                                '#10b981',
                                '#f59e0b',
                                '#ef4444',
                                '#8b5cf6',
                                '#06b6d4',
                                '#84cc16'
                            ] : ['#e2e8f0']
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    padding: 15,
                                    usePointStyle: true
                                }
                            }
                        }
                    }
                });
            }
        }

        /**
         * CHART DATA PROCESSING FUNCTIONS
         * ===============================
         * Functions that process app data for chart visualization
         */

        /**
         * Get last 7 days as chart labels
         * @returns {Array} Array of day names for the last 7 days
         */
        function getLast7Days() {
            const days = [];
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(date.getDate() - i);
                days.push(date.toLocaleDateString('en-US', { weekday: 'short' }));
            }
            return days;
        }

        /**
         * Get task completion data for the last 7 days
         * @returns {Array} Array of task completion counts by day
         */
        function getTaskCompletionData() {
            const data = [0, 0, 0, 0, 0, 0, 0];
            const completedTasks = appState.tasks.filter(task => task.status === 'done' && task.completedAt);
            
            // If no completed tasks, return zeros
            if (completedTasks.length === 0) {
                return data;
            }
            
            // Get the last 7 days
            const today = new Date();
            const last7Days = [];
            for (let i = 6; i >= 0; i--) {
                const date = new Date();
                date.setDate(today.getDate() - i);
                date.setHours(0, 0, 0, 0); // Start of day
                last7Days.push(date);
            }
            
            // Count completed tasks for each day
            completedTasks.forEach(task => {
                const completionDate = new Date(task.completedAt);
                completionDate.setHours(0, 0, 0, 0); // Start of day for comparison
                
                // Find which day this completion belongs to
                for (let i = 0; i < last7Days.length; i++) {
                    const dayStart = last7Days[i];
                    const dayEnd = new Date(dayStart);
                    dayEnd.setDate(dayEnd.getDate() + 1); // Next day
                    
                    if (completionDate >= dayStart && completionDate < dayEnd) {
                        data[i]++;
                        break;
                    }
                }
            });
            
            return data;
        }

        /**
         * Get expenses grouped by category for chart visualization
         * @returns {Array} Array of expense amounts by category
         */
        function getExpensesByCategory() {
            const categories = {
                food: 0,
                transport: 0,
                shopping: 0,
                entertainment: 0,
                other: 0
            };
            
            const expenses = appState.transactions.filter(t => t.type === 'expense');
            
            if (expenses.length === 0) {
                return [0, 0, 0, 0, 0]; // Return zeros if no expenses
            }
            
            expenses.forEach(transaction => {
                if (categories.hasOwnProperty(transaction.category)) {
                    categories[transaction.category] += transaction.amount;
                } else {
                    categories.other += transaction.amount;
                }
            });
            
            return Object.values(categories);
        }

        /**
         * Get last 6 months as chart labels
         * @returns {Array} Array of month/year labels for the last 6 months
         */
        function getLast6Months() {
            const months = [];
            const currentDate = new Date();
            
            for (let i = 5; i >= 0; i--) {
                const date = new Date(currentDate.getFullYear(), currentDate.getMonth() - i, 1);
                months.push(date.toLocaleDateString('en-US', { month: 'short', year: '2-digit' }));
            }
            
            return months;
        }

        /**
         * Get monthly spending data for the last 6 months
         * @returns {Array} Array of monthly spending amounts
         */
        function getMonthlySpendingData() {
            const monthlyData = [0, 0, 0, 0, 0, 0];
            const expenses = appState.transactions.filter(t => t.type === 'expense');
            
            if (expenses.length === 0) {
                return monthlyData;
            }
            
            // Group expenses by actual month
            expenses.forEach(expense => {
                const transactionDate = new Date(expense.date);
                const currentDate = new Date();
                
                // Calculate months difference
                const monthsDiff = (currentDate.getFullYear() - transactionDate.getFullYear()) * 12 + 
                                 (currentDate.getMonth() - transactionDate.getMonth());
                
                // Only include transactions from the last 6 months (0-5 months ago)
                if (monthsDiff >= 0 && monthsDiff < 6) {
                    const monthIndex = 5 - monthsDiff; // Reverse index (most recent = index 5)
                    monthlyData[monthIndex] += expense.amount;
                }
            });
            
            return monthlyData;
        }

        /**
         * Get formatted category labels for charts
         * @returns {Array} Array of formatted category names
         */
        function getCategoryLabels() {
            return appState.categories.budget.map(category => 
                category.charAt(0).toUpperCase() + category.slice(1)
            );
        }

        /**
         * EVENT LISTENER MANAGEMENT SYSTEM
         * ================================
         * Centralized event listener setup for all UI interactions
         * Manages form submissions, modal controls, navigation, and user interactions
         */

        /**
         * Bind all event listeners for the application
         * Central function that sets up all UI interactions
         */
        function bindEventListeners() {
            // Theme toggle
            document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
            
            // Navigation
            document.querySelectorAll('.nav-tile').forEach(tile => {
                tile.addEventListener('click', function() {
                    const module = this.dataset.module;
                    showModule(module);
                });
            });
            
            document.querySelectorAll('.back-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const module = this.dataset.module;
                    showModule(module);
                });
            });
            
            // Modal controls
            document.getElementById('add-task-btn').addEventListener('click', function() {
                updateFormCategories();
                document.getElementById('task-modal').classList.add('active');
            });
            
            document.getElementById('add-transaction-btn').addEventListener('click', function() {
                updateFormCategories();
                document.getElementById('transaction-modal').classList.add('active');
            });
            
            document.getElementById('add-note-btn').addEventListener('click', function() {
                resetNoteForm();
                document.getElementById('note-modal').classList.add('active');
            });
            
            // Notes search functionality
            document.getElementById('notes-search').addEventListener('input', function(e) {
                notesSearchTerm = e.target.value;
                if (appState.currentModule === 'notes') {
                    renderNotesGrid();
                }
            });
            
            // Tag filter - "All" button
            document.querySelector('[data-tag="all"]').addEventListener('click', function() {
                filterByTag('all');
            });
            
            // Category management
            document.getElementById('add-category-btn').addEventListener('click', addCategory);
            
            document.getElementById('new-category-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    addCategory();
                }
            });
            
            document.querySelectorAll('.category-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    switchCategoryType(this.dataset.category);
                });
            });
            
            document.querySelectorAll('.modal-close').forEach(btn => {
                btn.addEventListener('click', function() {
                    const modalId = this.dataset.modal;
                    document.getElementById(modalId).classList.remove('active');
                });
            });
            
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.classList.remove('active');
                    }
                });
            });
            
            // Form submissions
            document.getElementById('task-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                const taskData = {
                    title: document.getElementById('task-title').value,
                    description: document.getElementById('task-description').value,
                    priority: document.getElementById('task-priority').value,
                    category: document.getElementById('task-category').value,
                    dueDate: document.getElementById('task-due-date').value,
                    recurring: document.getElementById('task-recurring').checked
                };
                
                addTask(taskData);
                this.reset();
                document.getElementById('task-modal').classList.remove('active');
            });
            
            document.getElementById('transaction-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const transactionData = {
                    type: document.getElementById('transaction-type').value,
                    amount: document.getElementById('transaction-amount').value,
                    category: document.getElementById('transaction-category').value,
                    description: document.getElementById('transaction-description').value
                };
                
                addTransaction(transactionData);
                this.reset();
                document.getElementById('transaction-modal').classList.remove('active');
            });
            
            document.getElementById('note-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const noteData = {
                    id: document.getElementById('note-id').value,
                    title: document.getElementById('note-title').value,
                    content: document.getElementById('note-content').value,
                    tags: document.getElementById('note-tags').value
                };
                
                addNote(noteData);
                resetNoteForm();
                document.getElementById('note-modal').classList.remove('active');
            });
            
            // Note cancel button
            document.getElementById('note-cancel-btn').addEventListener('click', function() {
                resetNoteForm();
                document.getElementById('note-modal').classList.remove('active');
            });
        }

        /**
         * DEVELOPMENT AND UTILITY FUNCTIONS
         * =================================
         * Helper functions for development and testing
         */

        /**
         * Initialize sample data for demonstration purposes
         * Currently unused - app starts with clean state
         */
        function initializeSampleData() {
            // No sample data - start with clean slate
        }

        /**
         * APPLICATION ARCHITECTURE OVERVIEW
         * =================================
         * 
         * This productivity application follows a modular architecture with the following key components:
         * 
         * 1. STATE MANAGEMENT
         *    - Central appState object manages all application data
         *    - localStorage provides persistence across browser sessions
         *    - Real-time state synchronization across modules
         * 
         * 2. MODULE SYSTEM
         *    - Dashboard: Overview, stats, recommendations, navigation
         *    - Task Manager: Scrum board with drag-and-drop, priorities, categories
         *    - Budget Tracker: Income/expense tracking, visualizations, savings goals
         *    - Notes: Rich note-taking with tagging, search, and cross-linking
         * 
         * 3. CORE FEATURES
         *    - Responsive design with mobile-first approach
         *    - Dark/light theme switching with persistence
         *    - Gamification through daily activity streaks
         *    - Smart AI recommendations based on user behavior
         *    - Dynamic category management system
         *    - Interactive charts and visualizations
         * 
         * 4. DATA FLOW
         *    - User interactions → Event handlers → State updates → localStorage → UI refresh
         *    - Cross-module communication through shared state
         *    - Real-time updates across dashboard and modules
         * 
         * 5. TECHNOLOGY STACK
         *    - Pure HTML, CSS, JavaScript (no external frameworks)
         *    - Chart.js for data visualization
         *    - Font Awesome for icons
         *    - CSS Grid and Flexbox for layouts
         *    - CSS Custom Properties for theming
         * 
         * 6. EXTENSIBILITY
         *    - Modular function design for easy feature additions
         *    - Configurable categories for all data types
         *    - Plugin-ready chart system
         *    - Event-driven architecture for loose coupling
         */

        // Initialize sample data
        initializeSampleData();

        /*
         * END OF ZENITH PRODUCTIVITY APP
         * ==============================
         * 
         * Total Lines of Code: ~3300+
         * 
         * DOCUMENTATION COVERAGE:
         * ✅ Complete function documentation with JSDoc-style comments
         * ✅ Module-level architecture documentation
         * ✅ CSS organization and design system documentation
         * ✅ HTML structure and component documentation
         * ✅ Feature overview and technical specifications
         * ✅ Browser compatibility and dependency information
         * ✅ Development guidelines and extensibility notes
         * 
         * KEY ACHIEVEMENTS:
         * - Single-file architecture for easy deployment
         * - Comprehensive productivity suite with 4 major modules
         * - Modern Gen-Z focused design with dark/light themes
         * - Gamification through streaks and achievements
         * - AI-powered recommendations and insights
         * - Responsive design for all devices
         * - Local storage for offline functionality
         * - Interactive data visualizations
         * - Drag-and-drop task management
         * - Real-time search and filtering
         * - Cross-module data integration
         * 
         * FUTURE ENHANCEMENTS:
         * - Cloud sync integration
         * - Team collaboration features
         * - Advanced analytics and reporting
         * - Mobile app companion
         * - API integrations (calendar, email, etc.)
         * - Advanced AI features
         * - Customizable dashboard widgets
         * - Export/import functionality
         * 
         * Thank you for using Zenith Productivity App! 🚀
         */
    </script>
</body>
</html>
